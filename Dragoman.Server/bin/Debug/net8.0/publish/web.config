<?xml version="1.0" encoding="utf-8"?>
<configuration>
	<system.webServer>
		<handlers>
			<add name="aspNetCore" path="*" verb="*" modules="AspNetCoreModuleV2" resourceType="Unspecified" />
		</handlers>

		<aspNetCore processPath="dotnet"
					arguments=".\Dragoman.Server.dll"
					hostingModel="inprocess"
					stdoutLogEnabled="true"
					stdoutLogFile=".\logs\stdout" />

		<security>
			<authentication>
				<!-- On laisse l'anonyme pour tout le site -->
				<anonymousAuthentication enabled="true" />
				<!-- On ACTIVE aussi la Windows Auth pour que [Authorize] puisse challenger -->
				<windowsAuthentication enabled="true" useKernelMode="true">
					<providers>
						<clear />
						<add value="NTLM" />
						<!-- si tu as du Kerberos fonctionnel, tu peux aussi laisser Negotiate :
            <add value="Negotiate" /> -->
					</providers>
					<extendedProtection tokenChecking="None" />
				</windowsAuthentication>
			</authentication>
		</security>
	</system.webServer>
</configuration>
