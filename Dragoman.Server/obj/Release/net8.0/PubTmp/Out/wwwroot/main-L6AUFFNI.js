import{$ as tt,A as u,Aa as te,B as ye,Ba as ne,C as Ie,Ca as ie,D as y,E as h,Ea as be,F as m,Fa as lt,G as L,Ga as q,H as o,Ha as st,I as p,Ia as dt,J as v,Ja as De,K as J,L as Ke,M as se,N as de,O as ce,P as Je,Q as Qe,R as pe,S as A,T as Xe,U as D,V,W as P,X as I,Y as Ze,Z as Q,_ as et,a as Me,b as Oe,ba as Z,c as X,ca as M,d as Pe,da as nt,e as Ue,ea as it,f as ke,fa as rt,g as ge,ga as N,h as He,ha as ot,i as $e,ia as fe,j as We,ja as he,k as O,ka as xe,l as we,la as me,m as T,n as Te,na as F,o as C,oa as b,p as Ae,pa as w,q as x,qa as $,r as _,s as Ne,sa as _e,t as l,ta as j,u as f,ua as Fe,v as g,va as at,w as s,wa as R,x as Ye,y as i,z as n,za as B}from"./chunk-UPQ5EB2H.js";var ve={production:!0,apiUrl:"/api"};var ct=(()=>{class t{constructor(e){this.http=e,this.apiUrl=`${ve.apiUrl}/calendar`}getCalendarData(){return this.http.get(this.apiUrl,{withCredentials:!0})}static{this.\u0275fac=function(r){return new(r||t)(T(M))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Le=(()=>{class t{constructor(e){this.http=e,this.apiUrl=`${ve.apiUrl}/user`}getCurrentUser(){return this.http.get(`${this.apiUrl}/current`,{withCredentials:!0})}addUserWindows(){return this.http.post(`${this.apiUrl}/addUser`,{},{withCredentials:!0})}static{this.\u0275fac=function(r){return new(r||t)(T(M))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Rt(t,d){if(t&1){let e=y();i(0,"form",28)(1,"div",29)(2,"label"),o(3," N\xB0 affaire (nroRoleGen) "),u(4,"input",30),n(),i(5,"label"),o(6," N\xB0 audience (idAffAudience) "),u(7,"input",31),n()(),i(8,"div",32)(9,"button",27),h("click",function(){x(e);let a=m();return _(a.clearSearch())}),o(10,"Effacer"),n(),i(11,"button",33),h("click",function(){x(e);let a=m();return _(a.runSearch())}),o(12,"Rechercher"),n()()()}if(t&2){let e=m();s("formGroup",e.searchForm)}}function Bt(t,d){if(t&1){let e=y();i(0,"tr")(1,"td"),o(2),A(3,"date"),n(),i(4,"td"),o(5),n(),i(6,"td"),o(7),n(),i(8,"td"),o(9),n(),i(10,"td"),o(11),n(),i(12,"td",11),o(13),n(),i(14,"td",34),o(15),n(),i(16,"td"),o(17),n(),i(18,"td",11),o(19),n(),i(20,"td",35)(21,"button",4),h("click",function(){let a=x(e).$implicit,c=m();return _(c.goToSearch(a))}),o(22,"Ajouter"),n(),i(23,"button",36),h("click",function(){let a=x(e).$implicit,c=m();return _(c.removeAssignment(a))}),o(24,"Supprimer"),n()()()}if(t&2){let e,r=d.$implicit;l(2),p(D(3,11,r.dateAudience,"yyyy-MM-dd")),l(3),p(r.heureAudience),l(2),p(r.langueRole),l(2),p(r.langueRequete),l(2),p(r.langueCgoe),l(2),p(r.salleAudience),l(),s("title",r.nom),l(),p(r.nom),l(2),p(r.proc),l(2),p((e=r.tolkcode)!==null&&e!==void 0?e:""),l(4),s("disabled",!r.tolkcode)}}var mt=(()=>{class t{constructor(e,r,a,c){this.calendarService=e,this.userService=r,this.fb=a,this.router=c,this.calendarData=[],this.showSearchCard=!1,this.username=""}ngOnInit(){this.buildForms(),this.getCalendarData(),this.getCurrentUser(),this.addUserWindows()}buildForms(){this.filterForm=this.fb.group({dateFrom:[""],dateTo:[""],heure:[""],langueRole:[""],langueRequete:[""],langueCgoe:[""],salle:[""],nom:[""],proc:[""],tolkcode:[""]}),this.searchForm=this.fb.group({nroRoleGen:[""],idAffAudience:[""]})}getCalendarData(){this.calendarService.getCalendarData().subscribe({next:e=>{this.calendarData=e,this.initFilterStream()},error:e=>{console.error("Erreur lors de la r\xE9cup\xE9ration des donn\xE9es :",e)}})}initFilterStream(){this.filteredRows$=Ue([this.filterForm.valueChanges.pipe($e(this.filterForm.value)),this.searchForm.valueChanges.pipe($e(this.searchForm.value))]).pipe(Pe(([e,r])=>this.applyFilters(this.calendarData,e,r)))}norm(e){return(e??"").toString().toLowerCase().trim()}dateISO(e){if(!e)return"";if(typeof e=="string")return e.slice(0,10);if(e instanceof Date)return e.toISOString().slice(0,10);try{return new Date(e).toISOString().slice(0,10)}catch{return""}}toISO(e){return e?new Date(e).toISOString().slice(0,10):""}applyFilters(e,r,a){let c=this.toISO(r.dateFrom),S=this.toISO(r.dateTo),k=this.norm(r.heure),G=this.norm(r.langueRole),U=this.norm(r.langueRequete),ee=this.norm(r.langueCgoe),ae=this.norm(r.salle),le=this.norm(r.nom),ue=this.norm(r.proc),H=this.norm(r.tolkcode),qe=this.norm(a.nroRoleGen),Ge=this.norm(a.idAffAudience);return e.filter(W=>{let ze=this.dateISO(W.dateAudience);return!(c&&ze<c||S&&ze>S||k&&!this.norm(W.heureAudience).includes(k)||G&&!this.norm(W.langueRole).includes(G)||U&&!this.norm(W.langueRequete).includes(U)||ee&&!this.norm(W.langueCgoe).includes(ee)||ae&&!this.norm(W.salleAudience).includes(ae)||le&&!this.norm(W.nom).includes(le)||ue&&!this.norm(W.proc).includes(ue)||H&&!this.norm(W.tolkcode).includes(H)||qe&&!this.norm(W.nroRoleGen).includes(qe)||Ge&&!this.norm(W.idAffAudience).includes(Ge))})}runSearch(){console.log("Recherche:",this.searchForm.value)}clearSearch(){this.searchForm.reset({nroRoleGen:"",idAffAudience:""})}resetFilters(){this.filterForm.reset({dateFrom:"",dateTo:"",heure:"",langueRole:"",langueRequete:"",langueCgoe:"",salle:"",nom:"",proc:"",tolkcode:""})}getCurrentUser(){this.userService.getCurrentUser().subscribe({next:e=>this.username=e.username??"",error:e=>console.error("Erreur lors de la r\xE9cup\xE9ration de l\u2019utilisateur :",e)})}addUserWindows(){this.userService.addUserWindows().subscribe({next:()=>console.log("Utilisateur ajout\xE9 dans la table Test"),error:e=>console.error("Erreur lors de l'ajout de l'utilisateur dans la table Test :",e)})}roleToLabel(e){if(!e)return;let r=e.toUpperCase();if(r==="F")return"Fran\xE7ais";if(r==="N")return"N\xE9erlandais"}toYmd(e){if(e)return e.substring(0,10)}goToSearch(e){this.router.navigate(["/interpretes"],{queryParams:{date:this.toYmd(e.dateAudience),langSrcLbl:e.langueRequete??"",langDstLbl:this.roleToLabel(e.langueRole)??"",idAffAudience:e.idAffAudience,nroRoleGen:e.nroRoleGen}})}removeAssignment(e){e.tolkcode&&confirm(`Supprimer l'affectation (tolkcode ${e.tolkcode}) ?`)&&console.log("TODO suppression affectation",{idAffAudience:e.idAffAudience,nroRoleGen:e.nroRoleGen,tolkcode:e.tolkcode})}static{this.\u0275fac=function(r){return new(r||t)(f(ct),f(Le),f(q),f(fe))}}static{this.\u0275cmp=C({type:t,selectors:[["app-calendar"]],decls:63,vars:6,consts:[[1,"calendar-container"],[1,"page-title"],[1,"card","card--surface"],[1,"card-header","card--glass"],[1,"btn","btn--primary",3,"click"],[1,"card-body"],["class","search-card",3,"formGroup",4,"ngIf"],[1,"table-wrap"],[1,"table"],[1,"thead-head"],[1,"col-nom"],[1,"center"],[1,"thead-filters",3,"formGroup"],[1,"filter-date"],[1,"date-range"],["type","date","formControlName","dateFrom"],["type","date","formControlName","dateTo"],["type","text","placeholder","HH:mm","formControlName","heure"],["type","text","placeholder","FR / NL","formControlName","langueRole"],["type","text","placeholder","Requ\xEAte","formControlName","langueRequete"],["type","text","placeholder","CGOE","formControlName","langueCgoe"],["type","text","placeholder","Salle","formControlName","salle"],["type","text","placeholder","Nom","formControlName","nom"],["type","text","placeholder","Proc","formControlName","proc"],["type","text","placeholder","Tolkcode","formControlName","tolkcode"],[4,"ngFor","ngForOf"],[1,"filters-actions"],["type","button",1,"btn",3,"click"],[1,"search-card",3,"formGroup"],[1,"form-grid-2"],["type","text","formControlName","nroRoleGen","placeholder","ex: 2025/12345"],["type","text","formControlName","idAffAudience","placeholder","ex: 987654"],[1,"card-actions"],["type","button",1,"btn","btn--primary",3,"click"],[1,"ellipsis","col-nom",3,"title"],[1,"center","nowrap"],[1,"btn","btn--danger",3,"click","disabled"]],template:function(r,a){r&1&&(i(0,"div",0)(1,"h2",1),o(2,"Audiences"),n(),i(3,"div",2)(4,"div",3)(5,"button",4),h("click",function(){return a.showSearchCard=!a.showSearchCard}),o(6),n()(),i(7,"div",5),g(8,Rt,13,1,"form",6),i(9,"div",7)(10,"table",8)(11,"thead")(12,"tr",9)(13,"th"),o(14,"Date"),n(),i(15,"th"),o(16,"Heure"),n(),i(17,"th"),o(18,"Langue r\xF4le"),n(),i(19,"th"),o(20,"Langue requ\xEAte"),n(),i(21,"th"),o(22,"Langue CGOE"),n(),i(23,"th"),o(24,"Salle"),n(),i(25,"th",10),o(26,"Nom"),n(),i(27,"th"),o(28,"Proc"),n(),i(29,"th"),o(30,"Tolkcode"),n(),i(31,"th",11),o(32,"Actions"),n()(),i(33,"tr",12)(34,"th",13)(35,"div",14),u(36,"input",15),i(37,"span"),o(38,"\u2192"),n(),u(39,"input",16),n()(),i(40,"th"),u(41,"input",17),n(),i(42,"th"),u(43,"input",18),n(),i(44,"th"),u(45,"input",19),n(),i(46,"th"),u(47,"input",20),n(),i(48,"th"),u(49,"input",21),n(),i(50,"th"),u(51,"input",22),n(),i(52,"th"),u(53,"input",23),n(),i(54,"th"),u(55,"input",24),n(),u(56,"th"),n()(),i(57,"tbody"),g(58,Bt,25,14,"tr",25),A(59,"async"),n()()(),i(60,"div",26)(61,"button",27),h("click",function(){return a.resetFilters()}),o(62,"R\xE9initialiser les filtres"),n()()()()()),r&2&&(l(6),v(" ",a.showSearchCard?"Fermer la recherche avanc\xE9e":"Rechercher par N\xB0 audience / N\xB0 affaire"," "),l(2),s("ngIf",a.showSearchCard),l(25),s("formGroup",a.filterForm),l(25),s("ngForOf",Xe(59,4,a.filteredRows$)))},dependencies:[P,I,j,F,w,$,R,B,Ze,Q],styles:[".calendar-container[_ngcontent-%COMP%]{padding:var(--page-pad, 30px);background:#f5f7fb;min-height:calc(100vh - 120px)}.card[_ngcontent-%COMP%]{border-radius:16px;box-shadow:0 6px 18px #0f172a14;border:1px solid rgba(2,6,23,.06);background:#fff;overflow:hidden}.card--surface[_ngcontent-%COMP%]{background:#fff}.card-header[_ngcontent-%COMP%]{padding:10px 12px;border-bottom:1px solid rgba(2,6,23,.06)}.card--glass[_ngcontent-%COMP%]{background:linear-gradient(270deg,#1e3a8a,#2563eb,#1d4ed8);color:#fff}.card-body[_ngcontent-%COMP%]{padding:12px;background:linear-gradient(180deg,#fff,#fbfdff)}.page-title[_ngcontent-%COMP%]{margin:4px 0 14px;font-size:20px;font-weight:600;color:#0f172a}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:10px;border:1px solid #d1d5db;background:#f8fafc;color:#0f172a;font-weight:500;cursor:pointer;transition:transform .02s ease,box-shadow .2s ease,background .2s ease,color .2s ease,border-color .2s ease;-webkit-user-select:none;user-select:none}.btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-left:8px}.btn[_ngcontent-%COMP%]:hover{box-shadow:0 6px 18px #0000001f;background:#f3f4f6}.btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}.btn[disabled][_ngcontent-%COMP%]{opacity:.55;cursor:not-allowed}.btn--primary[_ngcontent-%COMP%]{background:linear-gradient(270deg,#1e3a8a,#2563eb,#1d4ed8);color:#fff;border-color:transparent}.btn--primary[_ngcontent-%COMP%]:hover{filter:brightness(1.06)}.btn--danger[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b;border-color:#fecaca}.btn--danger[_ngcontent-%COMP%]:hover{background:#fecaca}.nowrap[_ngcontent-%COMP%]{white-space:nowrap}.search-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:12px;margin:10px 0 2px}.search-card[_ngcontent-%COMP%]   .form-grid-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px;margin-bottom:8px}.search-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:grid;gap:6px;font-size:.92rem;color:#0f172a}.search-card[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{height:34px;padding:6px 10px;border:1px solid #e5e7eb;border-radius:10px;outline:none;transition:border-color .2s ease,box-shadow .2s ease;background:#fff;color:#0f172a}.search-card[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]::placeholder{color:#9ca3af}.search-card[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{border-color:#2563eb;box-shadow:0 0 0 3px #2563eb2e}.card-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end}.table-wrap[_ngcontent-%COMP%]{max-height:68vh;overflow:auto;position:relative;margin-top:10px;border-radius:12px;border:1px solid #e2e8f0;background:#fff}[_ngcontent-%COMP%]:root{--thead-height: 40px}.table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#0f172a;font-size:.93rem}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;z-index:3;top:0;background:#eaf1ff;font-weight:700;text-align:left;border-bottom:1px solid #dbe5ff}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .thead-head[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{height:var(--thead-height);vertical-align:middle;padding:8px 10px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .thead-filters[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{top:var(--thead-height);background:#f8fbff;z-index:2;border-bottom:1px solid #e6eefc;padding:6px 8px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 10px;border-bottom:1px solid #f1f5f9}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:#fcfdff}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f3f7ff}.center[_ngcontent-%COMP%]{text-align:center}.ellipsis[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.col-nom[_ngcontent-%COMP%]{max-width:240px}.thead-filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:30px;padding:4px 8px;font-size:.88rem;border:1px solid #e4e4e7;border-radius:8px;box-sizing:border-box;background:#fff;color:#0f172a}.thead-filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.filter-date[_ngcontent-%COMP%]   .date-range[_ngcontent-%COMP%]{display:grid;grid-template-columns:120px auto 120px;gap:6px;align-items:center}.filter-date[_ngcontent-%COMP%]   .date-range[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{height:30px;padding:2px 6px;font-size:.88rem}.filters-actions[_ngcontent-%COMP%]{margin-top:10px}@media (max-width: 1024px){.filter-date[_ngcontent-%COMP%]   .date-range[_ngcontent-%COMP%]{grid-template-columns:110px auto 110px}.col-nom[_ngcontent-%COMP%]{max-width:200px}}@media (max-width: 860px){.search-card[_ngcontent-%COMP%]   .form-grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.filter-date[_ngcontent-%COMP%]   .date-range[_ngcontent-%COMP%]{grid-template-columns:100px auto 100px}.col-nom[_ngcontent-%COMP%]{max-width:160px}}"]})}}return t})();var ut=(()=>{class t{constructor(){this.http=Te(M),this.base="/api/dashboard"}getResumeMock(){return X({audiences:6,langues:6,interpretes:6})}getInterpretesNonEncodesMock(){return X([{code:"1518 TEST21/02",date:"16/02"},{code:"1022 TEST21/02",date:"27/02"},{code:"1841 TEST21/02",date:"28/02"}])}getAudiencesSupprimeesMock(){return X([{numero:"733",date:"2017-10-18"},{numero:"1512",date:"2022-09-23"}])}getAudiencesToday(){return this.http.get(`${this.base}/audiences/today`).pipe(ge(()=>X([])))}getAudiencesDetailToday(){return this.http.get("/api/dashboard/audiences/detail-today")}getAudienceCountToday(){return this.http.get(`${this.base}/audiences/count-today`).pipe(ge(()=>X({nbAudiences:0})))}getInterpretesCountToday(){return this.http.get(`${this.base}/interpretes/count-today`).pipe(ge(()=>X({nbInterpretes:0})))}getLanguesToday(){return this.http.get(`${this.base}/langues/today`).pipe(ge(()=>X([])))}getAudiencesSupprimeesToday(){return this.http.get(`${this.base}/audiences-supprimees/today`).pipe(ge(()=>X([])))}loadResume(){return ke({aud:this.getAudienceCountToday(),int:this.getInterpretesCountToday(),lng:this.getLanguesToday()}).pipe(Pe(({aud:e,int:r,lng:a})=>({audiences:e.nbAudiences,interpretes:r.nbInterpretes,langues:a.length})))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Gt(t,d){if(t&1&&(i(0,"tr")(1,"td"),o(2),n(),i(3,"td",8),o(4),n()()),t&2){let e=d.$implicit;l(2),p(e.langue),l(2),p(e.nb)}}function zt(t,d){t&1&&(i(0,"tr")(1,"td",13),o(2,"Aucune langue demand\xE9e aujourd\u2019hui"),n()())}function Ut(t,d){if(t&1&&(i(0,"a",24),o(1),n()),t&2){let e=m().$implicit;s("href","tel:"+e.gsm,Ne),l(),v("GSM: ",e.gsm,"")}}function Ht(t,d){if(t&1&&(i(0,"a",24),o(1),n()),t&2){let e=m().$implicit;s("href","tel:"+e.tel,Ne),l(),v("TEL: ",e.tel,"")}}function Wt(t,d){if(t&1&&(i(0,"a",24),o(1),n()),t&2){let e=m().$implicit;s("href","tel:"+e.telbis,Ne),l(),v("TEL2: ",e.telbis,"")}}function Yt(t,d){if(t&1&&(i(0,"li",20)(1,"span",21),o(2),n(),i(3,"span",22),g(4,Ut,2,2,"a",23)(5,Ht,2,2,"a",23)(6,Wt,2,2,"a",23),n()()),t&2){let e=d.$implicit;l(2),J("",e.nom," ",e.prenom,""),l(2),s("ngIf",e.gsm),l(),s("ngIf",e.tel),l(),s("ngIf",e.telbis)}}function Kt(t,d){t&1&&(i(0,"div",25),o(1,"Aucun interpr\xE8te assign\xE9."),n())}function Jt(t,d){if(t&1&&(i(0,"li",14)(1,"span",15),o(2),n(),i(3,"div",16)(4,"div",17),o(5,"Interpr\xE8tes"),n(),i(6,"ul",18),g(7,Yt,7,5,"li",19),n(),g(8,Kt,2,0,"div",12),n()()),t&2){let e=d.$implicit;l(2),Ke(" ",e.heureAudience," \u2014 Salle ",e.salleAudience," \u2014 ",e.langueRequete," "),l(5),s("ngForOf",e.interpretes),l(),s("ngIf",!(e.interpretes!=null&&e.interpretes.length))}}function Qt(t,d){t&1&&(i(0,"li",25),o(1,"Aucune audience."),n())}var gt=(()=>{class t{constructor(e,r){this.dashboardService=e,this.userService=r,this.username="...",this.nbAudiences=0,this.nbInterpretes=0,this.nbLangues=0,this.audiencesToday=[],this.languesToday=[],this.audiencesSupprimees=[],this.loading=!0}ngOnInit(){this.userService.getCurrentUser().subscribe({next:e=>this.username=e?.username??"Invit\xE9",error:()=>this.username="Invit\xE9"}),this.dashboardService.getAudienceCountToday().subscribe({next:e=>this.nbAudiences=e.nbAudiences,error:()=>this.nbAudiences=0}),this.dashboardService.getInterpretesCountToday().subscribe({next:e=>this.nbInterpretes=e.nbInterpretes,error:()=>this.nbInterpretes=0}),this.dashboardService.getLanguesToday().subscribe({next:e=>{this.languesToday=e,this.nbLangues=e.length},error:()=>{this.languesToday=[],this.nbLangues=0}}),this.dashboardService.getAudiencesDetailToday().subscribe({next:e=>{let r=new Map;for(let a of e){let c=`${a.heureAudience}|${a.salleAudience}|${a.langueRequete}`;r.has(c)||r.set(c,{key:c,heureAudience:a.heureAudience,salleAudience:a.salleAudience,langueRequete:a.langueRequete,interpretes:[]}),(a.nom||a.prenom)&&r.get(c).interpretes.push({tolkcode:a.tolkcode,nom:a.nom,prenom:a.prenom,gsm:a.gsm,tel:a.tel,telbis:a.telbis})}this.audiencesToday=Array.from(r.values()).sort((a,c)=>(a.heureAudience??"").localeCompare(c.heureAudience??"")||(a.salleAudience??"").localeCompare(c.salleAudience??""))},error:()=>this.audiencesToday=[]}),this.dashboardService.getAudiencesSupprimeesToday().subscribe({next:e=>this.audiencesSupprimees=e,error:()=>this.audiencesSupprimees=[]}),this.loading=!1}static{this.\u0275fac=function(r){return new(r||t)(f(ut),f(Le))}}static{this.\u0275cmp=C({type:t,selectors:[["app-dashboard"]],decls:37,vars:7,consts:[[1,"dashboard-container"],[1,"cards"],[1,"card","blue"],[1,"card","green"],[1,"card","purple"],[1,"dashboard-grid"],[1,"list"],[1,"table"],[1,"right"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","audience-item","tabindex","0",4,"ngFor","ngForOf"],["class","muted",4,"ngIf"],["colspan","2",1,"muted"],["tabindex","0",1,"audience-item"],[1,"audience-label"],[1,"audience-tooltip"],[1,"tooltip-title"],[1,"tooltip-list"],["class","tooltip-row",4,"ngFor","ngForOf"],[1,"tooltip-row"],[1,"name"],[1,"phones"],[3,"href",4,"ngIf"],[3,"href"],[1,"muted"]],template:function(r,a){r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),o(4,"Audiences"),n(),i(5,"p"),o(6),n()(),i(7,"div",3)(8,"h2"),o(9,"Langues demand\xE9es"),n(),i(10,"p"),o(11),n()(),i(12,"div",4)(13,"h2"),o(14,"Interpr\xE8tes"),n(),i(15,"p"),o(16),n()()(),i(17,"div",5)(18,"div",6)(19,"h3"),o(20,"Langues du jour"),n(),i(21,"table",7)(22,"thead")(23,"tr")(24,"th"),o(25,"Langue"),n(),i(26,"th",8),o(27,"Nb"),n()()(),i(28,"tbody"),g(29,Gt,5,2,"tr",9)(30,zt,3,0,"tr",10),n()()(),i(31,"div",6)(32,"h3"),o(33,"Audiences (aujourd\u2019hui)"),n(),i(34,"ul"),g(35,Jt,9,5,"li",11)(36,Qt,2,0,"li",12),n()()()()),r&2&&(l(6),p(a.nbAudiences),l(5),p(a.nbLangues),l(5),p(a.nbInterpretes),l(13),s("ngForOf",a.languesToday),l(),s("ngIf",!(a.languesToday!=null&&a.languesToday.length)),l(5),s("ngForOf",a.audiencesToday),l(),s("ngIf",!(a.audiencesToday!=null&&a.audiencesToday.length)))},dependencies:[P,I],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:30px;background:#f7f9fb;min-height:100vh;display:flex;flex-direction:column;gap:20px}.dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;align-items:stretch}.cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px}.card[_ngcontent-%COMP%]{padding:20px;border-radius:15px;color:#fff;text-align:center;font-weight:700;box-shadow:0 4px 8px #0000001a;transition:transform .2s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:6px;font-size:1.1rem;font-weight:500}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:2rem;margin:0;font-weight:700}.card.blue[_ngcontent-%COMP%]{background:#3498db}.card.green[_ngcontent-%COMP%]{background:#2ecc71}.card.purple[_ngcontent-%COMP%]{background:#9b59b6}.list[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:15px;box-shadow:0 4px 8px #0000001a;min-width:250px}.list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:15px;font-size:1.1rem;border-bottom:2px solid #eee;padding-bottom:5px}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.92rem}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;border-bottom:1px solid #f0f0f0}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#fafbfc;font-weight:600}.right[_ngcontent-%COMP%]{text-align:right}.list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #f0f0f0}.list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.badge[_ngcontent-%COMP%]{background:#f3f4f6;padding:4px 10px;border-radius:999px;font-size:.75rem;font-weight:500;color:#991b1b}.muted[_ngcontent-%COMP%]{color:#6b7280}.audience-item[_ngcontent-%COMP%]{position:relative;align-items:center;gap:8px;outline:none}.audience-label[_ngcontent-%COMP%]{font-weight:500;color:#0f172a}.audience-tooltip[_ngcontent-%COMP%]{position:absolute;right:100%;top:50%;transform:translateY(-50%);margin-right:12px;min-width:260px;background:#0f172a;color:#fff;border-radius:12px;padding:12px;box-shadow:0 10px 24px #02061740;opacity:0;visibility:hidden;pointer-events:none;transition:opacity .18s ease,visibility .18s ease;z-index:50}.audience-item[_ngcontent-%COMP%]:hover   .audience-tooltip[_ngcontent-%COMP%], .audience-item[_ngcontent-%COMP%]:focus-within   .audience-tooltip[_ngcontent-%COMP%]{opacity:1;visibility:visible;pointer-events:auto}.tooltip-title[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem;margin-bottom:8px}.tooltip-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:grid;gap:6px;max-height:240px;overflow:auto}.tooltip-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:.9rem}.tooltip-row[_ngcontent-%COMP%]   .phones[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-right:6px;font-size:.85rem;color:#cbd5e1;text-decoration:none}.tooltip-row[_ngcontent-%COMP%]   .phones[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}}return t})();var Ce=(()=>{class t{constructor(e){this.http=e,this.base=`${ve.apiUrl}/interpretes`}getIdentite(e){let r=`${this.base}/${e}`;return console.log("GET",r),this.http.get(r)}saveIdentite(e,r){return this.http.put(`${this.base}/${e}`,r)}listAdresses(e){return this.http.get(`${this.base}/${e}/adresses`)}addAdresse(e,r){return this.http.post(`${this.base}/${e}/adresses`,r)}listIndispos(e){return this.http.get(`${this.base}/${e}/indispos`)}addIndispo(e,r){return this.http.post(`${this.base}/${e}/indispos`,r)}getTva(e){return this.http.get(`${this.base}/${e}/tva`)}saveTva(e,r){return this.http.post(`${this.base}/${e}/tva`,r)}listLangSource(e){return this.http.get(`${this.base}/${e}/langues/source`)}listLangDest(e){return this.http.get(`${this.base}/${e}/langues/destination`)}search(e,r){let a=new Z().set("mode",e).set("q",r);return this.http.get(`${this.base}/search`,{params:a})}audiencesExact(e){return this.http.get(`${this.base}/${e}/audiences-exact`)}match(e){let r=new Z().set("langSrc",String(e.langSrc)).set("langDst",String(e.langDst)).set("date",e.date);return this.http.get(`${this.base}/match`,{params:r})}static{this.\u0275fac=function(r){return new(r||t)(T(M))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Ve=(()=>{class t{constructor(e){this.http=e}listRef(e=!1){let r=e?"?destOnly=true":"";return this.http.get(`/api/langues${r}`)}listSources(e){return this.http.get(`/api/interpretes/${e}/langues/sources`)}addSource(e,r){return this.http.post(`/api/interpretes/${e}/langues/source`,{nrLangue:r})}removeSource(e,r){return this.http.delete(`/api/interpretes/${e}/langues/source/${r}`)}listDestinations(e){return this.http.get(`/api/interpretes/${e}/langues/destination`)}addDestination(e,r){return this.http.post(`/api/interpretes/${e}/langues/destination`,{nrLangue:r})}removeDestination(e,r){return this.http.delete(`/api/interpretes/${e}/langues/destination/${r}`)}static{this.\u0275fac=function(r){return new(r||t)(T(M))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Xt(t,d){if(t&1&&(i(0,"option",10),o(1),n()),t&2){let e=d.$implicit;s("ngValue",e.id),l(),p(e.libelle)}}function Zt(t,d){if(t&1&&(i(0,"option",10),o(1),n()),t&2){let e=d.$implicit;s("ngValue",e.id),l(),p(e.libelle)}}function en(t,d){if(t&1&&(i(0,"div",21),o(1),n()),t&2){let e=m();l(),p(e.error)}}function tn(t,d){t&1&&(i(0,"div",22),o(1,"Chargement\u2026"),n())}function nn(t,d){if(t&1&&(i(0,"div"),o(1),n()),t&2){let e=m(2).$implicit;l(),v("\u{1F4F1} ",e.gsm,"")}}function rn(t,d){if(t&1&&(i(0,"div"),o(1),n()),t&2){let e=m(2).$implicit;l(),v("\u260E\uFE0F ",e.tel,"")}}function on(t,d){if(t&1&&(i(0,"div"),o(1),n()),t&2){let e=m(2).$implicit;l(),v("\u260E\uFE0F ",e.telbis,"")}}function an(t,d){if(t&1&&(ye(0),g(1,nn,2,1,"div",35)(2,rn,2,1,"div",35)(3,on,2,1,"div",35),Ie()),t&2){let e=m().$implicit;l(),s("ngIf",e.gsm),l(),s("ngIf",e.tel),l(),s("ngIf",e.telbis)}}function ln(t,d){t&1&&o(0,"\u2014")}function sn(t,d){if(t&1&&(i(0,"span",36),o(1),n()),t&2){let e=d.$implicit;l(),p(e)}}function dn(t,d){if(t&1&&(ye(0),o(1),A(2,"number"),Ie()),t&2){let e=m().$implicit;l(),v(" ",D(2,1,e.distanceKm,"1.0-1")," km ")}}function cn(t,d){t&1&&o(0,"\u2014")}function pn(t,d){if(t&1){let e=y();i(0,"tr",29),h("click",function(){let a=x(e).$implicit,c=m(3);return _(c.openDetail(a.tolkcode))}),i(1,"td",30),o(2),n(),i(3,"td",31),o(4),n(),i(5,"td",31),o(6),n(),i(7,"td"),g(8,an,4,3,"ng-container",32)(9,ln,1,0,"ng-template",null,1,V),n(),i(11,"td",33),g(12,sn,2,1,"span",34),n(),i(13,"td",27),g(14,dn,3,4,"ng-container",32)(15,cn,1,0,"ng-template",null,2,V),n()()}if(t&2){let e=d.$implicit,r=L(10),a=L(16);l(2),p(e.tolkcode),l(2),p(e.nom||"\u2014"),l(2),p(e.prenom||"\u2014"),l(2),s("ngIf",e.gsm||e.tel||e.telbis)("ngIfElse",r),l(4),s("ngForOf",e.languesDestination),l(2),s("ngIf",e.distanceKm!=null)("ngIfElse",a)}}function mn(t,d){if(t&1&&(i(0,"table",25)(1,"thead")(2,"tr",26)(3,"th"),o(4,"Code"),n(),i(5,"th"),o(6,"Nom"),n(),i(7,"th"),o(8,"Pr\xE9nom"),n(),i(9,"th"),o(10,"T\xE9l\xE9phone"),n(),i(11,"th"),o(12,"Langues dest."),n(),i(13,"th",27),o(14,"Distance"),n()()(),i(15,"tbody"),g(16,pn,17,8,"tr",28),n()()),t&2){let e=m(2);l(16),s("ngForOf",e.rows)}}function un(t,d){t&1&&(i(0,"p",22),o(1,"Aucun r\xE9sultat."),n())}function gn(t,d){if(t&1&&(i(0,"div",23),g(1,mn,17,1,"table",24)(2,un,2,0,"ng-template",null,0,V),n()),t&2){let e=L(3),r=m();l(),s("ngIf",r.rows.length)("ngIfElse",e)}}var ht=(()=>{class t{constructor(e,r,a,c,S){this.api=e,this.languesSvc=r,this.router=a,this.route=c,this.langues=[],this.rows=[],this.loading=!1;let k=new Date().toISOString().slice(0,10);this.advForm=S.group({langSrc:[null],langDst:[null],date:[k]}),this.loadLangues()}loadLangues(){this.languesSvc.listRef(!1).subscribe({next:e=>{this.langues=(e||[]).map(r=>({id:r.idlangue,libelle:r.libelleFr??r.libelleNl??r.codeIso??`#${r.idlangue}`})),this.applyPrefillFromQuery()},error:()=>{this.langues=[],this.applyPrefillFromQuery()}})}applyPrefillFromQuery(){let e=this.route.snapshot.queryParamMap,r=e.get("date")||"",a=(e.get("langSrcLbl")||"").toLowerCase(),c=(e.get("langDstLbl")||"").toLowerCase(),S=ee=>{if(!ee)return null;let ae=this.langues.find(le=>le.libelle.toLowerCase()===ee.toLowerCase());return ae?ae.id:null},k=S(a),G=S(c),U={};r&&(U.date=r),k!=null&&(U.langSrc=k),G!=null&&(U.langDst=G),Object.keys(U).length&&this.advForm.patchValue(U,{emitEvent:!0})}resetAdvanced(){this.error=void 0,this.advForm.reset({langSrc:null,langDst:null,date:new Date().toISOString().slice(0,10)})}runAdvanced(){let e=this.advForm.value;if(!e.langSrc||!e.langDst||!e.date){this.error="Langue source, langue destination et date sont requis.";return}this.loading=!0,this.error=void 0,this.api.match({langSrc:e.langSrc,langDst:e.langDst,date:e.date}).subscribe({next:r=>{this.rows=r,this.loading=!1},error:r=>{this.error="Erreur de recherche.",this.loading=!1}})}openDetail(e){this.router.navigate(["/interpretes",e,"audiences"])}static{this.\u0275fac=function(r){return new(r||t)(f(Ce),f(Ve),f(fe),f(N),f(q))}}static{this.\u0275cmp=C({type:t,selectors:[["app-interprete-list"]],decls:30,vars:8,consts:[["empty",""],["noTel",""],["na",""],[1,"interprete-container"],[1,"card","card--panel"],[1,"toolbar"],[1,"page-title"],[1,"card","card--surface","search-card",3,"formGroup"],[1,"advanced-grid"],["formControlName","langSrc"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","langDst"],[1,"date-cell"],["type","date","formControlName","date"],[1,"actions"],["type","button",1,"btn","btn--sm",3,"click"],["type","button",1,"btn","btn--primary","btn--sm",3,"click"],["class","alert alert--error",4,"ngIf"],["class","muted",4,"ngIf"],["class","table-wrap",4,"ngIf"],[1,"alert","alert--error"],[1,"muted"],[1,"table-wrap"],["class","table table--compact",4,"ngIf","ngIfElse"],[1,"table","table--compact"],[1,"thead-head"],[1,"right"],["class","clickable",3,"click",4,"ngFor","ngForOf"],[1,"clickable",3,"click"],[1,"center"],[1,"ellipsis"],[4,"ngIf","ngIfElse"],[1,"langs"],["class","badge",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"badge"]],template:function(r,a){r&1&&(i(0,"div",3)(1,"div",4)(2,"div",5)(3,"h2",6),o(4,"Recherche d\u2019interpr\xE8tes"),n()(),i(5,"form",7)(6,"div",8)(7,"label"),o(8," Langue source "),i(9,"select",9)(10,"option",10),o(11,"\u2014"),n(),g(12,Xt,2,2,"option",11),n()(),i(13,"label"),o(14," Langue destination "),i(15,"select",12)(16,"option",10),o(17,"\u2014"),n(),g(18,Zt,2,2,"option",11),n()(),i(19,"label",13),o(20," Date "),u(21,"input",14),n(),i(22,"div",15)(23,"button",16),h("click",function(){return a.resetAdvanced()}),o(24,"Effacer"),n(),i(25,"button",17),h("click",function(){return a.runAdvanced()}),o(26,"Rechercher"),n()()()(),g(27,en,2,1,"div",18)(28,tn,2,0,"div",19)(29,gn,4,2,"div",20),n()()),r&2&&(l(5),s("formGroup",a.advForm),l(5),s("ngValue",null),l(2),s("ngForOf",a.langues),l(4),s("ngValue",null),l(2),s("ngForOf",a.langues),l(9),s("ngIf",a.error),l(),s("ngIf",a.loading),l(),s("ngIf",!a.loading))},dependencies:[P,I,j,ne,ie,F,te,w,$,R,B,et],encapsulation:2})}}return t})();var fn=t=>["/interpretes",t,"detail"],hn=t=>["/interpretes",t,"adresses"],xn=t=>["/interpretes",t,"tva"],_n=t=>["/interpretes",t,"langues"],bn=t=>["/interpretes",t,"indispo"],vn=t=>["/interpretes",t,"audiences"],z=(()=>{class t{constructor(e){this.route=e}ngOnInit(){if(this.tolkcode==null){let e=this.route.snapshot.paramMap.get("tolkcode");this.tolkcode=e?Number(e):void 0}}static{this.\u0275fac=function(r){return new(r||t)(f(N))}}static{this.\u0275cmp=C({type:t,selectors:[["app-navbarinter"]],inputs:{tolkcode:"tolkcode"},decls:18,vars:19,consts:[[1,"navbarinter"],[1,"nav-left"],[1,"nav-right"],["routerLinkActive","active",3,"routerLink"]],template:function(r,a){r&1&&(i(0,"nav",0)(1,"div",1),o(2," \u{1F464} Interpr\xE8te "),i(3,"strong"),o(4),n()(),i(5,"div",2)(6,"a",3),o(7,"Identit\xE9"),n(),i(8,"a",3),o(9,"Adresse"),n(),i(10,"a",3),o(11,"TVA / Statut"),n(),i(12,"a",3),o(13,"Langues"),n(),i(14,"a",3),o(15,"Indispos"),n(),i(16,"a",3),o(17,"Audiences"),n()()()),r&2&&(l(4),v("#",a.tolkcode,""),l(2),s("routerLink",pe(7,fn,a.tolkcode)),l(2),s("routerLink",pe(9,hn,a.tolkcode)),l(2),s("routerLink",pe(11,xn,a.tolkcode)),l(2),s("routerLink",pe(13,_n,a.tolkcode)),l(2),s("routerLink",pe(15,bn,a.tolkcode)),l(2),s("routerLink",pe(17,vn,a.tolkcode)))},dependencies:[he,xe],styles:[".navbarinter[_ngcontent-%COMP%]{background:linear-gradient(270deg,#1e3a8a,#2563eb,#1d4ed8,#1e3a8a)!important;background-size:600% 600%!important;animation:_ngcontent-%COMP%_gradientShift 12s ease infinite!important;margin:30px!important;width:calc(100% - 60px)!important;padding:8px 16px!important;border-radius:16px!important;box-shadow:0 6px 20px #0000004d!important;display:flex!important;justify-content:space-between!important;align-items:center!important;color:#fff!important;transition:all .3s ease!important}@keyframes _ngcontent-%COMP%_gradientShift{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.navbarinter[_ngcontent-%COMP%]   .nav-left[_ngcontent-%COMP%]{display:flex!important;align-items:center!important;gap:14px!important;font-size:1rem!important;color:#fff!important}.navbarinter[_ngcontent-%COMP%]   .nav-right[_ngcontent-%COMP%]{display:flex!important;align-items:center!important;gap:8px!important;flex-wrap:wrap!important}.navbarinter[_ngcontent-%COMP%]   .nav-right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff!important;text-decoration:none!important;padding:6px 12px!important;background:#ffffff1a!important;border:1px solid rgba(255,255,255,.2)!important;border-radius:8px!important;transition:.2s ease!important;font-size:.92rem!important}.navbarinter[_ngcontent-%COMP%]   .nav-right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#ffffff40!important}.navbarinter[_ngcontent-%COMP%]   .nav-right[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#fff!important;color:#1e3a8a!important;font-weight:600!important}@media (max-width: 420px){.navbarinter[_ngcontent-%COMP%]{margin:12px!important;width:calc(100% - 24px)!important;padding:8px 12px!important;flex-direction:column!important;align-items:flex-start!important;gap:10px!important}.navbarinter[_ngcontent-%COMP%]   .nav-right[_ngcontent-%COMP%]{width:100%!important;justify-content:flex-start!important}}"]})}}return t})();function Cn(t,d){t&1&&(i(0,"div",7),o(1,"Chargement\u2026"),n())}function Sn(t,d){if(t&1&&(i(0,"div",8),o(1),n()),t&2){let e=m();l(),p(e.error)}}function En(t,d){t&1&&(i(0,"span",7),o(1,"Enregistrement\u2026"),n())}function yn(t,d){t&1&&(i(0,"span",38),o(1,"Enregistr\xE9 \u2713"),n())}function In(t,d){if(t&1){let e=y();i(0,"form",9),h("ngSubmit",function(){x(e);let a=m();return _(a.saveIdent())}),i(1,"div",10)(2,"div",11)(3,"h3"),o(4,"Identit\xE9"),n(),i(5,"label"),o(6,"Nom *"),u(7,"input",12),n(),i(8,"label"),o(9,"Pr\xE9nom *"),u(10,"input",13),n(),i(11,"label"),o(12,"Email"),u(13,"input",14),n(),i(14,"label"),o(15,"Date de naissance"),u(16,"input",15),n(),i(17,"label"),o(18,"Genre"),u(19,"input",16),n(),i(20,"h3"),o(21,"Langue & Statut"),n(),i(22,"label"),o(23," Langue administrative "),i(24,"select",17)(25,"option",18),o(26,"\u2014 Choisir \u2014"),n(),i(27,"option",18),o(28,"1 \u2014 Fran\xE7ais"),n(),i(29,"option",18),o(30,"2 \u2014 N\xE9erlandais"),n()()(),i(31,"div",19)(32,"span",20),o(33,"Asserment\xE9"),n(),i(34,"div",21)(35,"label"),u(36,"input",22),o(37," Oui"),n(),i(38,"label"),u(39,"input",22),o(40," Non"),n()()(),i(41,"label"),o(42,"Nationalit\xE9"),u(43,"input",23),n(),i(44,"label"),o(45,"Registre national"),u(46,"input",24),n()(),i(47,"div",11)(48,"h3"),o(49,"Contact"),n(),i(50,"label"),o(51,"T\xE9l\xE9phone 1"),u(52,"input",25),n(),i(53,"label"),o(54,"T\xE9l\xE9phone 2"),u(55,"input",26),n(),i(56,"label"),o(57,"Fax"),u(58,"input",27),n(),i(59,"h3"),o(60,"Banque & TVA"),n(),i(61,"label"),o(62,"IBAN"),u(63,"input",28),n(),i(64,"label"),o(65,"Compte bancaire"),u(66,"input",29),n(),i(67,"label"),o(68,"N\xB0 TVA (texte)"),u(69,"input",30),n(),i(70,"label"),o(71,"N\xB0 TVA (num\xE9rique)"),u(72,"input",31),n(),i(73,"h3"),o(74,"Divers"),n(),i(75,"label"),o(76,"Origine"),u(77,"input",32),n(),i(78,"label"),o(79,"Code m\xE9tier"),u(80,"input",33),n(),i(81,"label"),o(82,"Remarque"),u(83,"textarea",34),n()()(),i(84,"footer",35)(85,"button",36),o(86,"\u{1F4BE} Enregistrer"),n(),g(87,En,2,0,"span",4)(88,yn,2,0,"span",37),n()()}if(t&2){let e=m();s("formGroup",e.fIdent),l(25),s("ngValue",null),l(2),s("ngValue",1),l(2),s("ngValue",2),l(7),s("value",1),l(3),s("value",0),l(46),s("disabled",e.saving),l(2),s("ngIf",e.saving),l(),s("ngIf",e.saved)}}var vt=(()=>{class t{constructor(e,r,a){this.fb=e,this.route=r,this.service=a,this.tolkcode=0,this.loading=!1,this.saving=!1,this.saved=!1,this.open={identite:!0,contact:!0,langueStatut:!0,banqueTva:!1,entreprise:!1,divers:!1},this.showAdvanced=!1,this.origPhones={gsm:"",tel:"",telbis:""}}ngOnInit(){this.route.paramMap.subscribe(e=>{let r=e.get("tolkcode");if(this.tolkcode=r?Number(r):NaN,Number.isNaN(this.tolkcode)){this.error="Param\xE8tre tolkcode manquant dans l\u2019URL.";return}this.buildForm(),this.loadIdentite()})}buildForm(){this.fIdent=this.fb.group({tolkcode:[{value:null,disabled:!0}],nom:["",[b.required,b.maxLength(50)]],prenom:["",[b.required,b.maxLength(50)]],email:["",[b.email,b.maxLength(80)]],dateNaissance:[null],genre:["",[b.maxLength(1)]],telephone1:["",[b.maxLength(40)]],telephone2:["",[b.maxLength(40)]],fax:["",[b.maxLength(40)]],taalrol:[null,[]],beedigd:[0,[]],nationaliteit:["",[b.maxLength(50)]],rijksregisternr:["",[b.maxLength(50)]],herkomst:["",[b.maxLength(20)]],beroepscode:[null],iban:["",[b.maxLength(34)]],bankrekening:["",[b.maxLength(34)]],tva:["",[b.maxLength(20)]],btwNr:[null],fedcom:[null],ondernemingsnummer:[null],vestigingsnummer:["",[b.maxLength(10)]],fedcomnummer:[null],remarque:["",[b.maxLength(250)]],evaluatiecode:[null],ba:["",[b.maxLength(11)]],iscce:["",[b.maxLength(1)]]})}loadIdentite(){this.loading=!0,this.error=void 0,this.service.getIdentite(this.tolkcode).subscribe({next:e=>{let r=e.gsm??e.Gsm??e.GSM??"",a=e.tel??e.Tel??e.TEL??"",c=e.telbis??e.Telbis??e.TELBIS??"";this.origPhones={gsm:r,tel:a,telbis:c};let S=Re([r,a,c]),k=S[0]??"",G=S[1]??"";this.fIdent.patchValue({tolkcode:this.tolkcode,nom:e.nom??e.Nom??"",prenom:e.prenom??e.Prenom??"",email:e.email??e.Email??"",dateNaissance:Mn(e.dateNaissance??e.DateNaissance??e.DATE_NAISSANCE),genre:e.genre??e.Genre??e.GENRE??"",fax:e.fax??e.Fax??"",telephone1:k,telephone2:G,taalrol:bt(e.taalrol??e.Taalrol),beedigd:_t(e.beedigd??e.Beedigd),nationaliteit:e.nationaliteit??e.Nationaliteit??e.NATIONALITEIT??"",rijksregisternr:e.rijksregisternr??e.Rijksregisternr??e.RIJKSREGISTERNR??"",herkomst:e.herkomst??e.Herkomst??e.HERKOMST??"",beroepscode:Ee(e.beroepscode??e.Beroepscode??e.BEROEPSCODE),iban:e.iban??e.Iban??e.IBAN??"",bankrekening:e.bankrekening??e.Bankrekening??e.BANKREKENING??"",tva:e.tva??e.Tva??e.TVA??"",btwNr:Ee(e.btwNr??e.BtwNr??e.BTW_NR),fedcom:Ee(e.fedcom??e.Fedcom??e.FEDCOM),ondernemingsnummer:Ee(e.ondernemingsnummer??e.Ondernemingsnummer??e.ONDERNEMINGSNUMMER),vestigingsnummer:e.vestigingsnummer??e.Vestigingsnummer??e.VESTIGINGSNUMMER??"",fedcomnummer:Ee(e.fedcomnummer??e.Fedcomnummer??e.FEDCOMNUMMER),remarque:e.remarque??e.Remarque??e.REMARQUE??"",evaluatiecode:Ee(e.evaluatiecode??e.Evaluatiecode??e.EVALUATIECODE),ba:e.ba??e.Ba??e.BA??"",iscce:e.iscce??e.Iscce??e.ISCCE??""}),this.openSectionsWithErrors(),this.loading=!1},error:e=>{this.error="Erreur lors du chargement de l\u2019identit\xE9.",console.error(e),this.loading=!1}})}saveIdent(){if(this.fIdent.invalid){this.fIdent.markAllAsTouched(),this.openSectionsWithErrors();return}this.saving=!0,this.saved=!1,this.error=void 0;let e=this.fIdent.getRawValue(),r=Be(e.telephone1),a=Be(e.telephone2),c=Re([r,a]).filter(H=>H&&H.length>0),S=null,k=null,G=null,U=c.filter(xt),ee=c.filter(H=>!xt(H));U[0]&&(S=U[0]),ee[0]&&(k=ee[0]);let ae=Re([S??"",k??""]).filter(Boolean),le=c.filter(H=>!ae.includes(H));le[0]&&(G=le[0]);let ue=Oe(Me({},e),{tolkcode:this.tolkcode,beedigd:_t(e.beedigd),taalrol:bt(e.taalrol),dateNaissance:e.dateNaissance??null,gsm:c.length?S:null,tel:c.length?k:null,telbis:c.length?G:null});delete ue.telephone1,delete ue.telephone2,this.service.saveIdentite(this.tolkcode,ue).subscribe({next:()=>{this.saving=!1,this.saved=!0,setTimeout(()=>this.saved=!1,2500)},error:H=>{this.saving=!1,this.error="\xC9chec de l\u2019enregistrement.",console.error(H)}})}toggleSection(e){this.open[e]=!this.open[e]}toggleAdvanced(){this.showAdvanced=!this.showAdvanced,this.open.entreprise=this.showAdvanced,this.open.divers=this.showAdvanced}invalidCount(e){let r=0;for(let a of e){let c=this.fIdent.get(a);c&&c.invalid&&(c.touched||c.dirty)&&r++}return r}openSectionsWithErrors(){let e={identite:["nom","prenom","email","dateNaissance","genre"],contact:["telephone1","telephone2","fax"],langueStatut:["taalrol","beedigd","nationaliteit","rijksregisternr","herkomst","beroepscode"],banqueTva:["iban","bankrekening","tva","btwNr"],entreprise:["fedcom","ondernemingsnummer","vestigingsnummer","fedcomnummer"],divers:["remarque","evaluatiecode","ba","iscce"]};Object.keys(e).forEach(r=>{this.invalidCount(e[r])>0&&(this.open[r]=!0)})}static{this.\u0275fac=function(r){return new(r||t)(f(q),f(N),f(Ce))}}static{this.\u0275cmp=C({type:t,selectors:[["app-interprete-detail"]],decls:11,vars:5,consts:[[1,"card"],[1,"card-header"],[1,"card-actions"],["type","button",3,"click","disabled"],["class","info",4,"ngIf"],["class","error",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"info"],[1,"error"],[3,"ngSubmit","formGroup"],[1,"grid-2"],[1,"col"],["formControlName","nom","required",""],["formControlName","prenom","required",""],["type","email","formControlName","email"],["type","date","formControlName","dateNaissance"],["formControlName","genre","placeholder","M/F"],["formControlName","taalrol"],[3,"ngValue"],[1,"field-group"],[1,"label"],[1,"radio-row"],["type","radio","formControlName","beedigd",3,"value"],["formControlName","nationaliteit"],["formControlName","rijksregisternr"],["formControlName","telephone1"],["formControlName","telephone2"],["formControlName","fax"],["formControlName","iban"],["formControlName","bankrekening"],["formControlName","tva"],["type","number","formControlName","btwNr"],["formControlName","herkomst"],["type","number","formControlName","beroepscode"],["rows","2","formControlName","remarque"],[1,"card-footer"],["type","submit",3,"disabled"],["class","success",4,"ngIf"],[1,"success"]],template:function(r,a){r&1&&(u(0,"app-navbarinter"),i(1,"section",0)(2,"header",1)(3,"h2"),o(4),n(),i(5,"div",2)(6,"button",3),h("click",function(){return a.saveIdent()}),o(7,"\u{1F4BE} Enregistrer"),n()()(),g(8,Cn,2,0,"div",4)(9,Sn,2,1,"div",5)(10,In,89,9,"form",6),n()),r&2&&(l(4),v("Interpr\xE8te #",a.tolkcode,""),l(2),s("disabled",a.saving||a.loading),l(2),s("ngIf",a.loading),l(),s("ngIf",a.error),l(),s("ngIf",!a.loading))},dependencies:[I,j,ne,ie,F,Fe,te,at,w,$,be,R,B,z],styles:["[_nghost-%COMP%]{display:block}.tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin:6px 0 12px;flex-wrap:wrap}.tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .tabs[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{text-decoration:none;padding:6px 10px;border-radius:6px;background:#f3f3f5;color:#333;font-size:.9rem;border:1px solid #e5e7eb}.tabs[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background:#e7f0ff;color:#0f3d8a;font-weight:600;border-color:#cfe0ff}.card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e6e6e6;border-radius:12px;padding:14px;max-width:1000px;margin:0 auto 18px;box-shadow:0 2px 8px #0000000a}.card-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:600}.card-actions[_ngcontent-%COMP%]{margin-left:auto}.card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#0f62fe;color:#fff;border:0;border-radius:6px;padding:6px 12px;cursor:pointer}.card-actions[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.card-footer[_ngcontent-%COMP%]{margin-top:12px;padding-top:8px;border-top:1px solid #efefef;display:flex;gap:10px;align-items:center}.grid-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px 24px}.col[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:10px 0 6px;font-size:1rem;font-weight:600;color:#1f2937}label[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:.9rem;gap:4px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:6px;padding:6px 8px;font-size:.9rem}textarea[_ngcontent-%COMP%]{resize:vertical}.field-group[_ngcontent-%COMP%]{margin-top:6px}.radio-row[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.info[_ngcontent-%COMP%]{color:#555}.success[_ngcontent-%COMP%]{color:#1f8f3d;font-weight:600}.error[_ngcontent-%COMP%]{color:#b00020}@media (max-width: 900px){.grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return t})();function Be(t){return(t??"").replace(/[^\d+]/g,"").replace(/\s+/g,"").trim()}function xt(t){let d=Be(t);return d.startsWith("04")||d.startsWith("+324")||d.startsWith("324")}function Re(t){return Array.from(new Set(t.filter(Boolean)))}function Ee(t){let d=Number(t);return Number.isFinite(d)?d:null}function _t(t){return Number(t)===1?1:0}function bt(t){let d=Number(t);return d===1?1:d===2?2:null}function Mn(t){if(!t)return null;if(typeof t=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(t))return t;let d=new Date(t);return isNaN(d.getTime())?null:d.toISOString().slice(0,10)}var Ct=(()=>{class t{constructor(e){this.http=e}list(e,r=!0){return this.http.get(`/api/interpretes/${e}/adresses`,{params:{onlyActive:r}})}create(e,r){return this.http.post(`/api/interpretes/${e}/adresses`,r)}getOne(e){return this.http.get(`/api/adresses/${e}`)}update(e,r){return this.http.put(`/api/adresses/${e}`,r)}remove(e){return this.http.delete(`/api/adresses/${e}`)}replace(e,r){return this.http.post(`/api/interpretes/${e}/adresses/replace`,r)}static{this.\u0275fac=function(r){return new(r||t)(T(M))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Pn(t,d){t&1&&(i(0,"div",11),o(1,"Chargement\u2026"),n())}function kn(t,d){if(t&1&&(i(0,"div",12),o(1),n()),t&2){let e=m();l(),p(e.error)}}function wn(t,d){if(t&1){let e=y();i(0,"tr")(1,"td"),o(2),n(),i(3,"td"),o(4),n(),i(5,"td"),o(6),n(),i(7,"td"),o(8),n(),i(9,"td"),o(10),n(),i(11,"td"),o(12),n(),i(13,"td"),o(14),A(15,"date"),n(),i(16,"td"),o(17),A(18,"date"),n(),i(19,"td",17)(20,"button",18),h("click",function(){let a=x(e).$implicit,c=m(2);return _(c.edit(a))}),o(21,"\u270F\uFE0F"),n(),i(22,"button",19),h("click",function(){let a=x(e).$implicit,c=m(2);return _(c.remove(a))}),o(23,"\u{1F5D1}\uFE0F"),n()()()}if(t&2){let e=d.$implicit;l(2),p(e.land),l(2),p(e.cp),l(2),p(e.commune),l(2),p(e.rue),l(2),p(e.numero),l(2),p(e.boite),l(2),p(D(15,8,e.startdate,"yyyy-MM-dd")),l(3),p(D(18,11,e.enddate,"yyyy-MM-dd"))}}function Tn(t,d){t&1&&(i(0,"tr")(1,"td",20),o(2,"Aucune adresse"),n()())}function An(t,d){if(t&1&&(i(0,"div",13)(1,"table",14)(2,"thead")(3,"tr")(4,"th"),o(5,"Pays"),n(),i(6,"th"),o(7,"CP"),n(),i(8,"th"),o(9,"Commune"),n(),i(10,"th"),o(11,"Rue"),n(),i(12,"th"),o(13,"N\xB0"),n(),i(14,"th"),o(15,"Bo\xEEte"),n(),i(16,"th"),o(17,"D\xE9but"),n(),i(18,"th"),o(19,"Fin"),n(),i(20,"th"),o(21,"Actions"),n()()(),i(22,"tbody"),g(23,wn,24,14,"tr",15)(24,Tn,3,0,"tr",16),n()()()),t&2){let e=m();l(23),s("ngForOf",e.rows),l(),s("ngIf",e.rows.length===0)}}function Nn(t,d){if(t&1&&(i(0,"h3"),o(1),n()),t&2){let e=m(2);l(),v("Modifier l\u2019adresse #",e.editingId,"")}}function Fn(t,d){t&1&&(i(0,"h3"),o(1,"Nouvelle adresse"),n())}function Dn(t,d){if(t&1){let e=y();i(0,"form",21),h("ngSubmit",function(){x(e);let a=m();return _(a.submit())}),g(1,Nn,2,1,"h3",22)(2,Fn,2,0,"ng-template",null,0,V),i(4,"div",23)(5,"label"),o(6,"Pays *"),u(7,"input",24),n(),i(8,"label"),o(9,"CP *"),u(10,"input",25),n(),i(11,"label"),o(12,"Commune *"),u(13,"input",26),n(),i(14,"label"),o(15,"Rue"),u(16,"input",27),n(),i(17,"label"),o(18,"Num\xE9ro"),u(19,"input",28),n(),i(20,"label"),o(21,"Bo\xEEte"),u(22,"input",29),n(),i(23,"label"),o(24,"Km"),u(25,"input",30),n(),i(26,"label"),o(27,"D\xE9but *"),u(28,"input",31),n(),i(29,"label"),o(30,"Fin"),u(31,"input",32),n()(),i(32,"div",33)(33,"button",34),o(34,"\u{1F4BE} Enregistrer"),n(),i(35,"button",35),h("click",function(){x(e);let a=m();return _(a.cancel())}),o(36,"Annuler"),n()()()}if(t&2){let e=L(3),r=m();s("formGroup",r.f),l(),s("ngIf",r.editingId)("ngIfElse",e),l(32),s("disabled",r.saving||r.f.invalid)}}var Et=(()=>{class t{constructor(e,r,a){this.route=e,this.fb=r,this.svc=a,this.tolkcode=0,this.loading=!1,this.saving=!1,this.rows=[],this.onlyActive=!0,this.editingId=null,this.formVisible=!1,this.f=this.fb.nonNullable.group({land:["",[b.required,b.maxLength(50)]],cp:["",[b.required,b.maxLength(10)]],commune:["",[b.required,b.maxLength(100)]],rue:[""],numero:[""],boite:[""],km:[null],startdate:["",b.required],enddate:[""]})}ngOnInit(){let e=this.route.snapshot.paramMap.get("tolkcode");this.tolkcode=e?Number(e):0,this.resetForm(),this.refresh()}refresh(){this.loading=!0,this.error=void 0,this.svc.list(this.tolkcode,this.onlyActive).subscribe({next:e=>{this.rows=e,this.loading=!1},error:e=>{this.error="Erreur de chargement des adresses.",console.error(e),this.loading=!1}})}toggleActive(){this.onlyActive=!this.onlyActive,this.refresh()}todayIso(){return new Date().toISOString().slice(0,10)}resetForm(){this.editingId=null,this.f.reset({land:"",cp:"",commune:"",rue:"",numero:"",boite:"",km:null,startdate:this.todayIso(),enddate:""})}create(){this.editingId=null,this.formVisible=!0,this.f.patchValue({startdate:this.todayIso(),enddate:""})}edit(e){this.editingId=e.idAdresse,this.formVisible=!0,this.f.patchValue({land:e.land??"",cp:e.cp??"",commune:e.commune??"",rue:e.rue??"",numero:e.numero??"",boite:e.boite??"",km:e.km??null,startdate:St(e.startdate)??this.todayIso(),enddate:St(e.enddate)??""})}cancel(){this.formVisible=!1,this.resetForm()}submit(){if(this.f.invalid){this.f.markAllAsTouched();return}this.saving=!0;let e={land:this.f.value.land,cp:this.f.value.cp,commune:this.f.value.commune,rue:this.f.value.rue||null,numero:this.f.value.numero||null,boite:this.f.value.boite||null,km:this.f.value.km??null,startdate:this.f.value.startdate,enddate:this.f.value.enddate?this.f.value.enddate:null},r=()=>{this.saving=!1,this.formVisible=!1,this.resetForm(),this.refresh()},a=c=>{this.saving=!1,this.error="\xC9chec de l\u2019enregistrement.",console.error(c)};this.editingId?this.svc.update(this.editingId,e).subscribe({next:r,error:a}):this.svc.replace(this.tolkcode,e).subscribe({next:r,error:a})}remove(e){confirm("Supprimer cette adresse ?")&&this.svc.remove(e.idAdresse).subscribe({next:()=>this.refresh(),error:r=>{this.error="\xC9chec de la suppression.",console.error(r)}})}static{this.\u0275fac=function(r){return new(r||t)(f(N),f(q),f(Ct))}}static{this.\u0275cmp=C({type:t,selectors:[["app-adresses"]],decls:15,vars:6,consts:[["addTpl",""],[1,"card"],[1,"card-header"],[1,"card-actions"],[1,"chk"],["type","checkbox",3,"change","checked"],["type","button",3,"click"],["class","info",4,"ngIf"],["class","error",4,"ngIf"],["class","table-wrap",4,"ngIf"],["class","form-card",3,"formGroup","ngSubmit",4,"ngIf"],[1,"info"],[1,"error"],[1,"table-wrap"],[1,"tbl"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"actions"],["type","button","title","Modifier",3,"click"],["type","button","title","Supprimer",1,"danger",3,"click"],["colspan","9",1,"muted"],[1,"form-card",3,"ngSubmit","formGroup"],[4,"ngIf","ngIfElse"],[1,"grid-2"],["formControlName","land","required",""],["formControlName","cp","required",""],["formControlName","commune","required",""],["formControlName","rue"],["formControlName","numero"],["formControlName","boite"],["type","number","formControlName","km"],["type","date","formControlName","startdate","required",""],["type","date","formControlName","enddate"],[1,"form-actions"],["type","submit",3,"disabled"],["type","button",1,"ghost",3,"click"]],template:function(r,a){r&1&&(u(0,"app-navbarinter"),i(1,"section",1)(2,"header",2)(3,"h2"),o(4),n(),i(5,"div",3)(6,"label",4)(7,"input",5),h("change",function(){return a.toggleActive()}),n(),o(8," Uniquement actives "),n(),i(9,"button",6),h("click",function(){return a.create()}),o(10,"\u2795 Nouvelle"),n()()(),g(11,Pn,2,0,"div",7)(12,kn,2,1,"div",8)(13,An,25,2,"div",9)(14,Dn,37,4,"form",10),n()),r&2&&(l(4),v("Adresses \u2014 Interpr\xE8te #",a.tolkcode,""),l(3),s("checked",a.onlyActive),l(4),s("ngIf",a.loading),l(),s("ngIf",a.error),l(),s("ngIf",!a.loading),l(),s("ngIf",a.formVisible))},dependencies:[P,I,j,F,Fe,w,$,be,R,B,z,Q],styles:["[_nghost-%COMP%]{display:block}.tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin:6px 0 12px;flex-wrap:wrap}.tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .tabs[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{text-decoration:none;padding:6px 10px;border-radius:6px;background:#f3f3f5;color:#333;font-size:.9rem;border:1px solid #e5e7eb}.tabs[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background:#e7f0ff;color:#0f3d8a;font-weight:600;border-color:#cfe0ff}.card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e6e6e6;border-radius:12px;padding:14px;max-width:1100px;margin:0 auto 18px;box-shadow:0 2px 8px #0000000a}.card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:10px}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:600}.card-actions[_ngcontent-%COMP%]{margin-left:auto;display:flex;align-items:center;gap:10px}.card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#0f62fe;color:#fff;border:0;border-radius:6px;padding:6px 10px;cursor:pointer}.chk[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.9rem}.table-wrap[_ngcontent-%COMP%]{overflow:auto}.tbl[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.92rem}.tbl[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tbl[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #eee;padding:8px;text-align:left}.tbl[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#fafbfc;font-weight:600}.tbl[_ngcontent-%COMP%]   td.actions[_ngcontent-%COMP%]{white-space:nowrap}.tbl[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;background:#eef2ff;padding:4px 8px;border-radius:6px;cursor:pointer}.tbl[_ngcontent-%COMP%]   button.danger[_ngcontent-%COMP%]{background:#ffeef0}.muted[_ngcontent-%COMP%]{color:#6b7280}.form-card[_ngcontent-%COMP%]{margin-top:14px;border-top:1px dashed #e9e9e9;padding-top:12px}.form-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1rem;font-weight:600}.grid-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(220px,1fr));gap:12px 16px}label[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:.92rem;gap:6px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:1px solid #d8d8d8;border-radius:8px;padding:7px 9px;font-size:.92rem;width:100%}.form-actions[_ngcontent-%COMP%]{margin-top:10px;display:flex;gap:10px}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#0f62fe;color:#fff;border:0;border-radius:6px;padding:8px 12px;cursor:pointer}.form-actions[_ngcontent-%COMP%]   .ghost[_ngcontent-%COMP%]{background:#f3f3f3;color:#333}.info[_ngcontent-%COMP%]{color:#555}.error[_ngcontent-%COMP%]{color:#b00020}@media (max-width: 900px){.grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return t})();function St(t){if(!t)return null;if(typeof t=="string"&&/^\d{4}-\d{2}-\d{2}/.test(t))return t.slice(0,10);let d=new Date(t);return isNaN(d.getTime())?null:d.toISOString().slice(0,10)}function Ln(t,d){t&1&&(i(0,"div",5),o(1,"Chargement\u2026"),n())}function Vn(t,d){if(t&1&&(i(0,"div",6),o(1),n()),t&2){let e=m();l(),p(e.error)}}function $n(t,d){if(t&1&&(i(0,"option",10),o(1),n()),t&2){let e=d.$implicit;s("ngValue",e.idlangue),l(),J(" ",e.libelleFr||e.codeIso," (",e.codeIso,") ")}}function jn(t,d){if(t&1){let e=y();i(0,"li",16)(1,"div",17)(2,"span"),o(3),n(),i(4,"button",18),h("click",function(){let a=x(e).$implicit,c=m(2);return _(c.removeSource(a.idLangueSource))}),o(5,"Supprimer"),n()()()}if(t&2){let e=d.$implicit;l(3),p(e.libelleFr||e.codeIso)}}function Rn(t,d){t&1&&(i(0,"li",19),o(1,"Aucune langue source."),n())}function Bn(t,d){if(t&1&&(i(0,"option",10),o(1),n()),t&2){let e=d.$implicit;s("ngValue",e.idlangue),l(),J(" ",e.libelleFr||e.codeIso," (",e.codeIso,") ")}}function qn(t,d){if(t&1){let e=y();i(0,"li",16)(1,"div",17)(2,"span"),o(3),n(),i(4,"button",18),h("click",function(){let a=x(e).$implicit,c=m(2);return _(c.removeDestination(a.idLanguedestination))}),o(5,"Supprimer"),n()()()}if(t&2){let e=d.$implicit;l(3),p(e.libelleFr||e.codeIso)}}function Gn(t,d){t&1&&(i(0,"li",19),o(1,"Aucune langue destination."),n())}function zn(t,d){if(t&1){let e=y();i(0,"div",7)(1,"div")(2,"h3"),o(3,"Langues source"),n(),i(4,"div",8)(5,"select",9),ce("ngModelChange",function(a){x(e);let c=m();return de(c.addSrc,a)||(c.addSrc=a),_(a)}),i(6,"option",10),o(7,"\u2014 Ajouter \u2014"),n(),g(8,$n,2,3,"option",11),n(),i(9,"button",12),h("click",function(){x(e);let a=m();return _(a.addSource())}),o(10,"Ajouter"),n()(),i(11,"ul",13),g(12,jn,6,1,"li",14)(13,Rn,2,0,"li",15),n()(),i(14,"div")(15,"h3"),o(16,"Langues destination"),n(),i(17,"div",8)(18,"select",9),ce("ngModelChange",function(a){x(e);let c=m();return de(c.addDst,a)||(c.addDst=a),_(a)}),i(19,"option",10),o(20,"\u2014 Ajouter \u2014"),n(),g(21,Bn,2,3,"option",11),n(),i(22,"button",12),h("click",function(){x(e);let a=m();return _(a.addDestination())}),o(23,"Ajouter"),n()(),i(24,"ul",13),g(25,qn,6,1,"li",14)(26,Gn,2,0,"li",15),n()()()}if(t&2){let e=m();l(5),se("ngModel",e.addSrc),l(),s("ngValue",null),l(2),s("ngForOf",e.refForSource),l(4),s("ngForOf",e.sources),l(),s("ngIf",e.sources.length===0),l(5),se("ngModel",e.addDst),l(),s("ngValue",null),l(2),s("ngForOf",e.refForDestination),l(4),s("ngForOf",e.dests),l(),s("ngIf",e.dests.length===0)}}var yt=(()=>{class t{constructor(e,r){this.route=e,this.languesService=r,this.tolkcode=0,this.loading=!1,this.refForSource=[],this.refForDestination=[],this.sources=[],this.dests=[],this.addSrc=null,this.addDst=null}ngOnInit(){let e=this.route.snapshot.paramMap.get("tolkcode");if(this.tolkcode=e?Number(e):NaN,Number.isNaN(this.tolkcode)){this.error="Param\xE8tre tolkcode manquant dans l\u2019URL.";return}this.loadAll()}loadAll(){this.loading=!0,this.error=void 0,ke({refSrc:this.languesService.listRef(!1),refDst:this.languesService.listRef(!0),sources:this.languesService.listSources(this.tolkcode),dests:this.languesService.listDestinations(this.tolkcode)}).pipe(He(()=>this.loading=!1)).subscribe({next:({refSrc:e,refDst:r,sources:a,dests:c})=>{this.refForSource=e,this.refForDestination=r,this.sources=a,this.dests=c},error:()=>{this.error="Erreur lors du chargement des langues."}})}addSource(){this.addSrc!=null&&this.languesService.addSource(this.tolkcode,this.addSrc).subscribe({next:()=>{this.addSrc=null,this.loadAll()},error:()=>this.error="Impossible d\u2019ajouter la langue source"})}removeSource(e){this.languesService.removeSource(this.tolkcode,e).subscribe({next:()=>this.loadAll(),error:()=>this.error="Impossible de supprimer la langue source"})}addDestination(){this.addDst!=null&&this.languesService.addDestination(this.tolkcode,this.addDst).subscribe({next:()=>{this.addDst=null,this.loadAll()},error:()=>this.error="Impossible d\u2019ajouter la langue destination"})}removeDestination(e){this.languesService.removeDestination(this.tolkcode,e).subscribe({next:()=>this.loadAll(),error:()=>this.error="Impossible de supprimer la langue destination"})}static{this.\u0275fac=function(r){return new(r||t)(f(N),f(Ve))}}static{this.\u0275cmp=C({type:t,selectors:[["app-langues"]],decls:8,vars:4,consts:[[1,"card"],[1,"card-header"],["class","alert alert--info",4,"ngIf"],["class","alert alert--error",4,"ngIf"],["class","form-grid-2",4,"ngIf"],[1,"alert","alert--info"],[1,"alert","alert--error"],[1,"form-grid-2"],[2,"display","flex","gap","8px","align-items","center","margin-bottom","8px"],[3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","button",1,"btn","btn--primary",3,"click"],[2,"list-style","none","padding","0","margin","0","display","grid","gap","6px"],["class","card","style","padding:8px 10px; margin:0;",4,"ngFor","ngForOf"],["class","muted",4,"ngIf"],[1,"card",2,"padding","8px 10px","margin","0"],[2,"display","flex","justify-content","space-between","align-items","center"],[1,"btn","btn--danger",3,"click"],[1,"muted"]],template:function(r,a){r&1&&(u(0,"app-navbarinter"),i(1,"section",0)(2,"header",1)(3,"h2"),o(4),n()(),g(5,Ln,2,0,"div",2)(6,Vn,2,1,"div",3)(7,zn,27,10,"div",4),n()),r&2&&(l(4),v("Langues \u2014 Interpr\xE8te #",a.tolkcode,""),l(),s("ngIf",a.loading),l(),s("ngIf",a.error),l(),s("ngIf",!a.loading))},dependencies:[P,I,ne,ie,te,w,_e,z],styles:["[_nghost-%COMP%]{display:block}nav.tabs[_ngcontent-%COMP%], .tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin:6px 0 12px;flex-wrap:wrap}nav.tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .tabs[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{text-decoration:none;padding:6px 10px;border-radius:6px;background:#f3f3f5;color:#333;font-size:.9rem;border:1px solid #e5e7eb}nav.tabs[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .tabs[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background:#e7f0ff;color:#0f3d8a;font-weight:600;border-color:#cfe0ff}section.card[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e6e6e6;border-radius:12px;box-shadow:0 2px 8px #0000000a;overflow:hidden;max-width:1100px;margin:0 auto 18px}.card-header[_ngcontent-%COMP%]{padding:14px;border-bottom:1px solid #eee}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:600;color:#0f172a}.columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px 16px;padding:14px}.col[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:2px 0 8px;font-size:1rem;font-weight:600}.adder[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;margin-bottom:8px}.adder[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:7px 9px;border:1px solid #d8d8d8;border-radius:8px;font-size:.92rem}.adder[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#0f62fe;color:#fff;border:0;border-radius:6px;padding:6px 10px;cursor:pointer}.adder[_ngcontent-%COMP%]   button.ghost[_ngcontent-%COMP%]{background:#f3f3f3;color:#333}ul.list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:grid;gap:6px}ul.list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 10px;border:1px solid #eee;border-radius:8px;background:#fff}ul.list[_ngcontent-%COMP%]   .danger[_ngcontent-%COMP%]{background:#ffeef0;color:#b00020;border:0;border-radius:6px;padding:4px 8px;cursor:pointer;white-space:nowrap}.muted[_ngcontent-%COMP%]{color:#6b7280;font-style:italic}.info[_ngcontent-%COMP%]{color:#555;background:transparent;padding:0}.error[_ngcontent-%COMP%]{color:#b00020;background:transparent;padding:0}@media (max-width: 900px){.columns[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return t})();var It=(()=>{class t{constructor(){this.http=Te(M),this.baseUrl="/api"}getTvaList(e){return this.http.get(`${this.baseUrl}/interpretes/${e}/tva`)}getStatuts(){return this.http.get(`${this.baseUrl}/tva/statuts`)}addTva(e,r){return this.http.post(`${this.baseUrl}/interpretes/${e}/tva`,r)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Hn(t,d){t&1&&(i(0,"div",9),o(1,"Chargement\u2026"),n())}function Wn(t,d){if(t&1&&(i(0,"div",10),o(1),n()),t&2){let e=m();l(),p(e.error)}}function Yn(t,d){if(t&1&&(i(0,"tr")(1,"td"),o(2),n(),i(3,"td"),o(4),A(5,"date"),n(),i(6,"td"),o(7),A(8,"date"),n()()),t&2){let e=d.$implicit;l(2),p(e.statut),l(2),p(D(5,3,e.startdate,"yyyy-MM-dd")),l(3),p(D(8,6,e.enddate,"yyyy-MM-dd"))}}function Kn(t,d){if(t&1&&(i(0,"table",13)(1,"thead")(2,"tr")(3,"th"),o(4,"Statut"),n(),i(5,"th"),o(6,"D\xE9but"),n(),i(7,"th"),o(8,"Fin"),n()()(),i(9,"tbody"),g(10,Yn,9,9,"tr",14),n()()),t&2){let e=m(2);l(10),s("ngForOf",e.tvas)}}function Jn(t,d){t&1&&(i(0,"div",15),o(1,"Aucun statut TVA enregistr\xE9."),n())}function Qn(t,d){if(t&1&&(i(0,"div",11),g(1,Kn,11,1,"table",12)(2,Jn,2,0,"ng-template",null,0,V),n()),t&2){let e=L(3),r=m();l(),s("ngIf",r.tvas==null?null:r.tvas.length)("ngIfElse",e)}}function Xn(t,d){if(t&1&&(i(0,"option",24),o(1),n()),t&2){let e=d.$implicit;s("ngValue",e.idStatut),l(),p(e.libelle)}}function Zn(t,d){if(t&1){let e=y();i(0,"form",16),h("ngSubmit",function(){x(e);let a=m();return _(a.addTva())}),i(1,"div",17)(2,"label"),o(3," Statut "),i(4,"select",18)(5,"option",19),o(6,"\u2014 Choisir \u2014"),n(),g(7,Xn,2,2,"option",20),n()(),i(8,"label"),o(9," Date de d\xE9but "),u(10,"input",21),n()(),i(11,"div",3)(12,"button",22),o(13,"Enregistrer"),n(),i(14,"button",23),h("click",function(){x(e);let a=m();return _(a.showForm=!1)}),o(15,"Annuler"),n()()()}if(t&2){let e=m();s("formGroup",e.form),l(5),s("ngValue",null),l(2),s("ngForOf",e.statuts),l(5),s("disabled",e.form.invalid||e.saving)}}var Mt=(()=>{class t{constructor(e,r,a){this.fb=e,this.route=r,this.tvaService=a,this.tolkcode=0,this.tvas=[],this.statuts=[],this.loading=!1,this.saving=!1,this.showForm=!1}ngOnInit(){let e=this.route.snapshot.paramMap.get("tolkcode");if(this.tolkcode=e?Number(e):NaN,Number.isNaN(this.tolkcode)){this.error="Param\xE8tre tolkcode manquant dans l\u2019URL.";return}this.buildForm(),this.load()}buildForm(){this.form=this.fb.group({idStatut:[null,b.required],startdate:[this.todayISO(),b.required]})}todayISO(){let e=new Date,r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${e.getFullYear()}-${r}-${a}`}load(){this.loading=!0,this.error=void 0,this.tvaService.getStatuts().subscribe({next:e=>this.statuts=e}),this.tvaService.getTvaList(this.tolkcode).subscribe({next:e=>{this.tvas=e,this.loading=!1},error:()=>{this.error="Erreur lors du chargement des statuts TVA.",this.loading=!1}})}addTva(){if(this.form.invalid||this.saving)return;this.saving=!0;let e=this.form.value;this.tvaService.addTva(this.tolkcode,e).subscribe({next:()=>{this.saving=!1,this.showForm=!1,this.form.reset({idStatut:null,startdate:this.todayISO()}),this.load()},error:()=>{this.saving=!1,this.error="Erreur lors de l\u2019enregistrement."}})}static{this.\u0275fac=function(r){return new(r||t)(f(q),f(N),f(It))}}static{this.\u0275cmp=C({type:t,selectors:[["app-tva"]],decls:12,vars:6,consts:[["empty",""],[1,"card"],[1,"card-header"],[1,"card-actions"],[1,"btn",3,"click"],["class","alert alert--info",4,"ngIf"],["class","alert alert--error",4,"ngIf"],["class","table-wrap",4,"ngIf"],["class","form-card",3,"formGroup","ngSubmit",4,"ngIf"],[1,"alert","alert--info"],[1,"alert","alert--error"],[1,"table-wrap"],["class","table",4,"ngIf","ngIfElse"],[1,"table"],[4,"ngFor","ngForOf"],[1,"muted"],[1,"form-card",3,"ngSubmit","formGroup"],[1,"form-grid-2"],["formControlName","idStatut"],["disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","date","formControlName","startdate"],["type","submit",1,"btn","btn--primary",3,"disabled"],["type","button",1,"btn",3,"click"],[3,"ngValue"]],template:function(r,a){r&1&&(u(0,"app-navbarinter"),i(1,"section",1)(2,"div",2)(3,"h2"),o(4),n(),i(5,"div",3)(6,"button",4),h("click",function(){return a.showForm=!a.showForm}),o(7),n()()(),g(8,Hn,2,0,"div",5)(9,Wn,2,1,"div",6)(10,Qn,4,2,"div",7)(11,Zn,16,4,"form",8),n()),r&2&&(l(4),v("Statuts TVA \u2014 Interpr\xE8te #",a.tolkcode,""),l(3),p(a.showForm?"Annuler":"Ajouter"),l(),s("ngIf",a.loading),l(),s("ngIf",!a.loading&&a.error),l(),s("ngIf",!a.loading),l(),s("ngIf",a.showForm))},dependencies:[P,I,j,ne,ie,F,te,w,$,R,B,z,Q],styles:[".tva-card[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:16px;box-shadow:0 6px 20px #00000014;max-width:900px;margin:32px auto 0}.tva-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#1e3a8a;margin-bottom:24px}.tva-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.tva-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:12px 16px;font-weight:600;background-color:#f1f5f9;color:#1e3a8a;border-bottom:2px solid #e2e8f0}.tva-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #e5e7eb;color:#374151}.tva-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.btn-add[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border:none;padding:8px 16px;border-radius:8px;font-weight:500;cursor:pointer;transition:all .2s ease;float:right;margin-bottom:12px}.btn-add[_ngcontent-%COMP%]:hover{background:#1e3a8a;transform:translateY(-1px)}"]})}}return t})();var Ot=(()=>{class t{constructor(e,r){this.http=e,this.auth=r,this.base="/api/interpretes"}list(e){return this.http.get(`${this.base}/${e}/indispo`)}add(e,r){return this.auth.getLogin().pipe(We(a=>{let c=a||"anonymous",S=Oe(Me({},r),{createuser:c,modifuser:c});return this.http.post(`${this.base}/${e}/indispo`,S)}))}remove(e,r){return this.http.delete(`${this.base}/${e}/indispo/${r}`)}static{this.\u0275fac=function(r){return new(r||t)(T(M),T(De))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ni(t,d){if(t&1&&(i(0,"div",9),o(1),n()),t&2){let e=m();l(),p(e.error)}}function ii(t,d){t&1&&(i(0,"div",10),o(1,"Chargement\u2026"),n())}function ri(t,d){if(t&1){let e=y();i(0,"form",11),h("ngSubmit",function(){x(e);let a=m();return _(a.add())}),i(1,"div",12)(2,"label"),o(3,"D\xE9but *"),u(4,"input",13),n(),i(5,"label"),o(6,"Fin (optionnel)"),u(7,"input",14),n(),i(8,"label"),o(9," Motif (max 5) "),u(10,"input",15),n(),i(11,"label"),o(12," Commentaire "),u(13,"textarea",16),n()(),i(14,"div",3)(15,"button",17),o(16,"Enregistrer"),n()()()}if(t&2){let e=m();s("formGroup",e.form),l(15),s("disabled",e.form.invalid||e.saving)}}function oi(t,d){if(t&1){let e=y();i(0,"tr")(1,"td"),o(2),n(),i(3,"td"),o(4),A(5,"date"),n(),i(6,"td"),o(7),A(8,"date"),n(),i(9,"td"),o(10),n(),i(11,"td",22),o(12),n(),i(13,"td",23)(14,"button",24),h("click",function(){let a=x(e).$implicit,c=m(3);return _(c.remove(a.idIndispo))}),o(15,"Supprimer"),n()()()}if(t&2){let e=d.$implicit;l(2),p(e.idIndispo),l(2),p(D(5,6,e.startindispo,"yyyy-MM-dd")),l(3),p(e.endindispo?D(8,9,e.endindispo,"yyyy-MM-dd"):"\u2014"),l(3),p(e.motifindispo||"\u2014"),l(),s("title",e.commentaire||""),l(),p(e.commentaire||"\u2014")}}function ai(t,d){if(t&1&&(i(0,"table",20)(1,"thead")(2,"tr")(3,"th"),o(4,"ID"),n(),i(5,"th"),o(6,"D\xE9but"),n(),i(7,"th"),o(8,"Fin"),n(),i(9,"th"),o(10,"Motif"),n(),i(11,"th"),o(12,"Commentaire"),n(),u(13,"th"),n()(),i(14,"tbody"),g(15,oi,16,12,"tr",21),n()()),t&2){let e=m(2);l(15),s("ngForOf",e.rows)}}function li(t,d){t&1&&(i(0,"div",25),o(1,"Aucune indisponibilit\xE9."),n())}function si(t,d){if(t&1&&(i(0,"div",18),g(1,ai,16,1,"table",19)(2,li,2,0,"ng-template",null,0,V),n()),t&2){let e=L(3),r=m();l(),s("ngIf",r.rows==null?null:r.rows.length)("ngIfElse",e)}}var Pt=(()=>{class t{constructor(e,r,a){this.fb=e,this.route=r,this.api=a,this.tolkcode=0,this.rows=[],this.showForm=!1,this.loading=!1,this.saving=!1}ngOnInit(){let e=this.route.snapshot.paramMap.get("tolkcode");if(this.tolkcode=e?Number(e):NaN,Number.isNaN(this.tolkcode)){this.error="Param\xE8tre tolkcode manquant.";return}this.buildForm(),this.load()}buildForm(){this.form=this.fb.group({startindispo:[this.todayISO(),b.required],endindispo:[""],motifindispo:[""],commentaire:[""]},{validators:[this.endAfterStart]})}endAfterStart(e){let r=(e.get("startindispo")?.value??"").toString(),a=(e.get("endindispo")?.value??"").toString();return!r||!a||a>=r?null:{range:"end < start"}}todayISO(){let e=new Date,r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${e.getFullYear()}-${r}-${a}`}load(){this.loading=!0,this.error=void 0,this.api.list(this.tolkcode).subscribe({next:e=>{this.rows=e,this.loading=!1},error:()=>{this.error="Erreur de chargement.",this.loading=!1}})}add(){if(this.form.invalid||this.saving)return;this.saving=!0;let e=this.form.value;e.endindispo===""&&(e.endindispo=null),this.api.add(this.tolkcode,e).subscribe({next:()=>{this.saving=!1,this.showForm=!1,this.form.reset({startindispo:this.todayISO(),endindispo:"",motifindispo:"",commentaire:""}),this.load()},error:r=>{this.saving=!1,this.error=r?.error??"Erreur lors de l\u2019enregistrement."}})}remove(e){confirm("Supprimer cette indisponibilit\xE9 ?")&&this.api.remove(this.tolkcode,e).subscribe({next:()=>this.load(),error:()=>this.error="Suppression impossible."})}static{this.\u0275fac=function(r){return new(r||t)(f(q),f(N),f(Ot))}}static{this.\u0275cmp=C({type:t,selectors:[["app-indispo"]],decls:12,vars:6,consts:[["empty",""],[1,"card"],[1,"card-header"],[1,"card-actions"],["type","button",1,"btn",3,"click"],["class","alert alert--error",4,"ngIf"],["class","alert alert--info",4,"ngIf"],["class","form-card",3,"formGroup","ngSubmit",4,"ngIf"],["class","table-wrap",4,"ngIf"],[1,"alert","alert--error"],[1,"alert","alert--info"],[1,"form-card",3,"ngSubmit","formGroup"],[1,"form-grid-2"],["type","date","formControlName","startindispo"],["type","date","formControlName","endindispo"],["type","text","maxlength","5","formControlName","motifindispo"],["rows","2","formControlName","commentaire"],["type","submit",1,"btn","btn--primary",3,"disabled"],[1,"table-wrap"],["class","table",4,"ngIf","ngIfElse"],[1,"table"],[4,"ngFor","ngForOf"],[1,"ellipsis",3,"title"],[1,"actions"],["type","button",1,"btn","btn--danger",3,"click"],[1,"muted"]],template:function(r,a){r&1&&(u(0,"app-navbarinter"),i(1,"section",1)(2,"header",2)(3,"h2"),o(4),n(),i(5,"div",3)(6,"button",4),h("click",function(){return a.showForm=!a.showForm}),o(7),n()()(),g(8,ni,2,1,"div",5)(9,ii,2,0,"div",6)(10,ri,17,2,"form",7)(11,si,4,2,"div",8),n()),r&2&&(l(4),v("Indisponibilit\xE9s \u2014 Interpr\xE8te #",a.tolkcode,""),l(3),v(" ",a.showForm?"Fermer le formulaire":"Nouvelle indisponibilit\xE9"," "),l(),s("ngIf",a.error),l(),s("ngIf",a.loading),l(),s("ngIf",a.showForm),l(),s("ngIf",!a.loading))},dependencies:[P,I,j,F,w,$,lt,R,B,z,Q],styles:[".wrap[_ngcontent-%COMP%]{max-width:900px;margin:1rem auto}h2[_ngcontent-%COMP%]{margin-bottom:.75rem}.alert-error[_ngcontent-%COMP%]{background:#ffe5e5;color:#a40000;padding:.5rem .75rem;border-radius:6px;margin-bottom:.75rem}.btn[_ngcontent-%COMP%]{padding:.45rem .75rem;border:1px solid #ddd;border-radius:8px;background:#f7f7f7;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{background:#efefef}.btn.primary[_ngcontent-%COMP%]{background:#1a73e8;color:#fff;border-color:#1a73e8}.btn.primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn.danger[_ngcontent-%COMP%]{background:#f44336;color:#fff;border-color:#f44336}.card[_ngcontent-%COMP%]{border:1px solid #eee;border-radius:10px;padding:.75rem;margin:.75rem 0;background:#fff}.row[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center;margin:.5rem 0}.row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:160px;font-weight:600}.row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex:1;padding:.4rem .5rem;border:1px solid #ddd;border-radius:6px}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:.5rem}.grid[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:.75rem}.grid[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .grid[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #eee;padding:.5rem;text-align:left}.grid[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#fafafa}.muted[_ngcontent-%COMP%]{color:#666;font-size:.85rem}.tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin:6px 0 12px;flex-wrap:wrap}.tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .tabs[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{text-decoration:none;padding:6px 10px;border-radius:6px;background:#f3f3f5;color:#333;font-size:.9rem;border:1px solid #e5e7eb}.tabs[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background:#e7f0ff;color:#0f3d8a;font-weight:600;border-color:#cfe0ff}.ellipsis[_ngcontent-%COMP%]{max-width:320px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}}return t})();function di(t,d){if(t&1&&(i(0,"div",5),o(1),n()),t&2){let e=m();l(),p(e.error)}}function ci(t,d){t&1&&(i(0,"div"),o(1,"Chargement\u2026"),n())}function pi(t,d){if(t&1&&(i(0,"tr")(1,"td"),o(2),A(3,"date"),n(),i(4,"td"),o(5),n(),i(6,"td"),o(7),n(),i(8,"td"),o(9),n(),i(10,"td"),o(11),n(),i(12,"td"),o(13),n(),i(14,"td",10),o(15),n(),i(16,"td",11),o(17),n(),i(18,"td"),o(19),n()()),t&2){let e=d.$implicit;l(2),p(D(3,10,e.dateAudience,"yyyy-MM-dd")),l(3),p(e.heureAudience),l(2),p(e.proc),l(2),p(e.nom),l(2),p(e.salleAudience),l(2),p(e.langueRole),l(2),p(e.langueRequete),l(),s("title",e.langueCgoe),l(),p(e.langueCgoe||"\u2014"),l(2),p(e.idAffAudience)}}function mi(t,d){if(t&1&&(i(0,"table",8)(1,"thead")(2,"tr")(3,"th"),o(4,"Date"),n(),i(5,"th"),o(6,"Heure"),n(),i(7,"th"),o(8,"Proc"),n(),i(9,"th"),o(10,"Nom"),n(),i(11,"th"),o(12,"Salle"),n(),i(13,"th"),o(14,"R\xF4le (langue)"),n(),i(15,"th"),o(16,"Langue requ\xEAte"),n(),i(17,"th"),o(18,"Langue Cgra OE "),n(),i(19,"th"),o(20,"Aff #"),n()()(),i(21,"tbody"),g(22,pi,20,13,"tr",9),n()()),t&2){let e=m(2);l(22),s("ngForOf",e.rows)}}function ui(t,d){t&1&&(i(0,"p",12),o(1,"Aucune audience trouv\xE9e."),n())}function gi(t,d){if(t&1&&(i(0,"div",6),g(1,mi,23,1,"table",7)(2,ui,2,0,"ng-template",null,0,V),n()),t&2){let e=L(3),r=m();l(),s("ngIf",r.rows.length)("ngIfElse",e)}}var kt=(()=>{class t{constructor(e,r){this.route=e,this.api=r,this.tolkcode="",this.rows=[],this.loading=!1}ngOnInit(){this.tolkcode=this.route.snapshot.paramMap.get("tolkcode")??"",this.load()}load(){if(!this.tolkcode){this.error="Tolkcode manquant";return}this.loading=!0,this.error=void 0,this.api.audiencesExact(this.tolkcode).subscribe({next:e=>{this.rows=e,this.loading=!1},error:e=>{this.error="Erreur de chargement.",this.loading=!1}})}static{this.\u0275fac=function(r){return new(r||t)(f(N),f(Ce))}}static{this.\u0275cmp=C({type:t,selectors:[["app-interprete-audiences"]],decls:7,vars:4,consts:[["empty",""],[1,"card-header"],["class","alert alert--error",4,"ngIf"],[4,"ngIf"],["class","table-wrap",4,"ngIf"],[1,"alert","alert--error"],[1,"table-wrap"],["class","table",4,"ngIf","ngIfElse"],[1,"table"],[4,"ngFor","ngForOf"],[1,"ellipsis"],[1,"ellipsis",3,"title"],[1,"muted"]],template:function(r,a){r&1&&(u(0,"app-navbarinter"),i(1,"div",1)(2,"h2"),o(3),n()(),g(4,di,2,1,"div",2)(5,ci,2,0,"div",3)(6,gi,4,2,"div",4)),r&2&&(l(3),v("Audiences compatibles \u2014 Tolkcode #",a.tolkcode,""),l(),s("ngIf",a.error),l(),s("ngIf",a.loading),l(),s("ngIf",!a.loading))},dependencies:[P,I,z,Q],encapsulation:2})}}return t})();var wt=(()=>{class t{constructor(e){this.http=e}getInterpretes(e){let r=new Z().set("date",e);return this.http.get("/api/reports/interpretes",{params:r})}downloadExcel(e){let r=new Z().set("date",e);return this.http.get("/api/reports/interpretes/excel",{params:r,responseType:"blob"})}downloadWord(e){let r=new Z().set("date",e);return this.http.get("/api/reports/interpretes/word",{params:r,responseType:"blob"})}static{this.\u0275fac=function(r){return new(r||t)(T(M))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function hi(t,d){if(t&1&&(i(0,"tr")(1,"td",14),u(2,"input",15),n(),i(3,"td")(4,"strong"),o(5),n(),i(6,"span",16),o(7),n()(),i(8,"td"),o(9),n(),i(10,"td",17),o(11),n(),i(12,"td",17),o(13),n(),i(14,"td",17),o(15),n()()),t&2){let e=d.$implicit,r=m(2);l(5),J("",e.nom," ",e.prenom,""),l(2),v("#",e.tolkcode,""),l(2),p(e.telephone||"-"),l(2),p(r.joinHeures(e.audiences)),l(2),p(r.joinSalles(e.audiences)),l(2),p(r.joinLangues(e.audiences))}}function xi(t,d){if(t&1&&(ye(0),g(1,hi,16,7,"tr",13),Ie()),t&2){let e=m();l(),s("ngForOf",e.data)("ngForTrackBy",e.trackByTolkcode)}}function _i(t,d){t&1&&(i(0,"div",18),o(1,"Aucun interpr\xE8te pr\xE9vu pour cette date."),n())}var Tt=(()=>{class t{constructor(e){this.reports=e,this.date=new Date().toISOString().slice(0,10),this.data=[],this.loading=!1}ngOnInit(){this.reload()}trackByTolkcode(e,r){return r?.tolkcode??e}reload(){this.loading=!0,this.reports.getInterpretes(this.date).subscribe({next:e=>{this.data=Array.isArray(e)?e:[],this.loading=!1},error:e=>{this.data=[],this.loading=!1}})}exportExcel(){this.reports.downloadExcel(this.date).subscribe(e=>{this.saveBlob(e,`Presence_Interpretes_${this.date}.xlsx`)})}exportWord(){this.reports.downloadWord(this.date).subscribe(e=>{this.saveBlob(e,`Presence_Interpretes_${this.date}.docx`)})}saveBlob(e,r){let a=URL.createObjectURL(e),c=document.createElement("a");c.href=a,c.download=r,document.body.appendChild(c),c.click(),c.remove(),URL.revokeObjectURL(a)}joinHeures(e){return(e??[]).map(r=>r.heure).filter(Boolean).join(", ")}joinSalles(e){return(e??[]).map(r=>r.salle).filter(Boolean).join(", ")}joinLangues(e){return(e??[]).map(r=>r.langue).filter(Boolean).join(", ")}static{this.\u0275fac=function(r){return new(r||t)(f(wt))}}static{this.\u0275cmp=C({type:t,selectors:[["app-presence-interpretes"]],decls:32,vars:5,consts:[["empty",""],[1,"card","card--panel","fade-in"],[1,"toolbar",2,"display","flex","gap","12px","align-items","center","justify-content","space-between"],[2,"display","flex","gap","10px","align-items","center"],[1,"page-title",2,"margin","0"],["type","date",3,"ngModelChange","change","ngModel"],[1,"btn","btn--primary","btn--sm",3,"click","disabled"],[1,"btn","btn--sm",3,"click","disabled"],[1,"card--surface"],[1,"table-wrap"],[1,"table","table--compact"],[1,"center",2,"width","90px"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"center"],["type","checkbox"],[1,"muted"],[1,"ellipsis"],[1,"muted",2,"padding","12px"]],template:function(r,a){if(r&1){let c=y();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"h3",4),o(4,"Feuille de pr\xE9sence \u2014 Interpr\xE8tes"),n(),i(5,"input",5),ce("ngModelChange",function(k){return x(c),de(a.date,k)||(a.date=k),_(k)}),h("change",function(){return x(c),_(a.reload())}),n()(),i(6,"div")(7,"button",6),h("click",function(){return x(c),_(a.exportExcel())}),o(8,"Exporter Excel"),n(),i(9,"button",7),h("click",function(){return x(c),_(a.exportWord())}),o(10,"Exporter Word"),n()()(),i(11,"div",8)(12,"div",9)(13,"table",10)(14,"thead")(15,"tr")(16,"th",11),o(17,"Pr\xE9sent"),n(),i(18,"th"),o(19,"Interpr\xE8te (#)"),n(),i(20,"th"),o(21,"T\xE9l\xE9phone"),n(),i(22,"th"),o(23,"Heure"),n(),i(24,"th"),o(25,"Salle"),n(),i(26,"th"),o(27,"Langue"),n()()(),i(28,"tbody"),g(29,xi,2,2,"ng-container",12),n()(),g(30,_i,2,0,"ng-template",null,0,V),n()()()}if(r&2){let c=L(31);l(5),se("ngModel",a.date),l(2),s("disabled",a.loading),l(2),s("disabled",a.loading),l(20),s("ngIf",a.data==null?null:a.data.length)("ngIfElse",c)}},dependencies:[P,I,F,w,_e],styles:[".table[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{text-align:center}.table[_ngcontent-%COMP%]   .ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:220px}@media print{.toolbar[_ngcontent-%COMP%]{display:none!important}.card[_ngcontent-%COMP%], .card--surface[_ngcontent-%COMP%]{box-shadow:none!important;border:none!important}.table-wrap[_ngcontent-%COMP%]{max-height:unset;overflow:visible;margin:0}.table[_ngcontent-%COMP%]{font-size:12px}}"]})}}return t})();var At=(()=>{class t{constructor(e){this.http=e,this.base="/api/prestations"}liste(e){let r=new Z().set("date",e);return this.http.get(`${this.base}/jour`,{params:r})}create(e){return this.http.post(this.base,e)}absence(e){return this.http.post(`${this.base}/absence`,e)}remplacement(e){return this.http.post(`${this.base}/remplacement`,e)}static{this.\u0275fac=function(r){return new(r||t)(T(M))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function vi(t,d){if(t&1&&(i(0,"div",9),o(1),n()),t&2){let e=m();l(),p(e.error)}}function Ci(t,d){t&1&&(i(0,"div",10),o(1,"Chargement\u2026"),n())}function Si(t,d){if(t&1&&(i(0,"span",21),o(1),n()),t&2){let e=d.$implicit;l(),p(e)}}function Ei(t,d){t&1&&(i(0,"span",22),o(1,"\u2713 Encod\xE9"),n())}function yi(t,d){t&1&&(i(0,"span",23),o(1,"\xC0 encoder"),n())}function Ii(t,d){if(t&1){let e=y();i(0,"tr")(1,"td")(2,"strong"),o(3),n(),i(4,"span",15),o(5),n()(),i(6,"td"),o(7),n(),i(8,"td"),g(9,Si,2,1,"span",16),n(),i(10,"td"),o(11),n(),i(12,"td"),g(13,Ei,2,0,"span",17)(14,yi,2,0,"span",18),n(),i(15,"td")(16,"button",19),h("click",function(){let a=x(e).$implicit,c=m(2);return _(c.pick(a))}),o(17," Encoder "),n(),i(18,"button",20),h("click",function(){let a=x(e).$implicit,c=m(2);return _(c.absent(a))}),o(19," Absent "),n()()()}if(t&2){let e=d.$implicit,r=m(2);Ye("active",(r.selected==null?null:r.selected.tolkcode)===e.tolkcode),l(3),J("",e.nom," ",e.prenom,""),l(2),v("#",e.tolkcode,""),l(2),p(e.telephone||"-"),l(2),s("ngForOf",e.idAffAudiences),l(2),p(e.heureAudienceSuggee||"-"),l(2),s("ngIf",e.hasPrestation),l(),s("ngIf",!e.hasPrestation),l(2),s("disabled",e.hasPrestation)}}function Mi(t,d){t&1&&(i(0,"div",10),o(1," Aucun interpr\xE8te r\xE9serv\xE9 pour cette date. "),n())}function Oi(t,d){if(t&1&&(i(0,"div",11)(1,"div",12)(2,"table",13)(3,"thead")(4,"tr")(5,"th"),o(6,"Interpr\xE8te"),n(),i(7,"th"),o(8,"T\xE9l\xE9phone"),n(),i(9,"th"),o(10,"Audiences li\xE9es"),n(),i(11,"th"),o(12,"Heure sugg\xE9r\xE9e"),n(),i(13,"th"),o(14,"Statut"),n(),i(15,"th"),o(16,"Actions"),n()()(),i(17,"tbody"),g(18,Ii,20,11,"tr",14),n()(),g(19,Mi,2,0,"div",6),n()()),t&2){let e=m();l(18),s("ngForOf",e.rows)("ngForTrackBy",e.trackByTolkcode),l(),s("ngIf",e.rows.length===0)}}function Pi(t,d){if(t&1){let e=y();i(0,"div",24)(1,"h4"),o(2,"Encoder les heures pour "),i(3,"strong"),o(4),n()(),i(5,"form",25)(6,"div",26)(7,"label"),o(8," Heure d'arriv\xE9e "),u(9,"input",27),n(),i(10,"label"),o(11," Heure de sortie "),u(12,"input",28),n()(),i(13,"div",29)(14,"button",30),h("click",function(){x(e);let a=m();return _(a.save())}),o(15," Enregistrer "),n(),i(16,"button",31),h("click",function(){x(e);let a=m();return a.selected=void 0,_(a.form.reset())}),o(17," Annuler "),n()()()()}if(t&2){let e=m();l(4),J("",e.selected.nom," ",e.selected.prenom,""),l(),s("formGroup",e.form),l(9),s("disabled",e.form.invalid||e.saving)}}var Nt=(()=>{class t{constructor(e,r){this.api=e,this.fb=r,this.date=this.todayISO(),this.rows=[],this.loading=!1,this.saving=!1}ngOnInit(){this.form=this.fb.group({start:["",b.required],end:["",b.required]}),this.load()}todayISO(){let e=new Date,r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${e.getFullYear()}-${r}-${a}`}load(){this.loading=!0,this.error=void 0,this.api.liste(this.date).subscribe({next:e=>{this.rows=e,this.loading=!1},error:()=>{this.error="Impossible de charger les donn\xE9es.",this.loading=!1}})}pick(e){if(this.selected=e,e.heureAudienceSuggee){let r=this.subtractMinutes(e.heureAudienceSuggee,15);this.form.patchValue({start:r})}}save(){if(!this.selected||this.form.invalid||this.saving)return;this.saving=!0;let e=this.form.value.start,r=this.form.value.end,a={tolkcode:this.selected.tolkcode,datePrestation:this.date,startheure:`${this.date}T${e}:00`,endheure:`${this.date}T${r}:00`,idAffAudiences:this.selected.idAffAudiences};this.api.create(a).subscribe({next:()=>{this.saving=!1,this.selected=void 0,this.form.reset(),this.load()},error:c=>{this.saving=!1,this.error=c?.error||"\xC9chec de l'enregistrement."}})}absent(e){if(!confirm(`Marquer ${e.nom} ${e.prenom} absent(e) ?`))return;let r={tolkcode:e.tolkcode,idAffAudience:e.idAffAudiences[0],datePrestation:this.date};this.api.absence(r).subscribe({next:()=>this.load(),error:()=>this.error="Impossible de marquer l'absence."})}trackByTolkcode(e,r){return r.tolkcode}subtractMinutes(e,r){let[a,c]=e.split(":").map(Number),S=a*60+c-r,k=Math.floor(S/60),G=S%60;return`${String(k).padStart(2,"0")}:${String(G).padStart(2,"0")}`}static{this.\u0275fac=function(r){return new(r||t)(f(At),f(q))}}static{this.\u0275cmp=C({type:t,selectors:[["app-prestations"]],decls:10,vars:5,consts:[[1,"card","card--panel","fade-in"],[1,"toolbar"],[2,"display","flex","gap","12px","align-items","center"],[1,"page-title",2,"margin","0"],["type","date",3,"ngModelChange","change","ngModel"],["class","alert alert--error",4,"ngIf"],["class","muted","style","padding: 12px;",4,"ngIf"],["class","card--surface",4,"ngIf"],["class","form-card",4,"ngIf"],[1,"alert","alert--error"],[1,"muted",2,"padding","12px"],[1,"card--surface"],[1,"table-wrap"],[1,"table","table--compact"],[3,"active",4,"ngFor","ngForOf","ngForTrackBy"],[1,"muted"],["class","badge",4,"ngFor","ngForOf"],["class","badge badge--success",4,"ngIf"],["class","badge badge--warning",4,"ngIf"],[1,"btn","btn--sm",3,"click","disabled"],[1,"btn","btn--sm","btn--danger",3,"click"],[1,"badge"],[1,"badge","badge--success"],[1,"badge","badge--warning"],[1,"form-card"],[3,"formGroup"],[1,"form-grid-2"],["type","time","formControlName","start","required",""],["type","time","formControlName","end","required",""],[1,"card-actions"],[1,"btn","btn--primary",3,"click","disabled"],[1,"btn",3,"click"]],template:function(r,a){r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),o(4,"Gestion des prestations"),n(),i(5,"input",4),ce("ngModelChange",function(S){return de(a.date,S)||(a.date=S),S}),h("change",function(){return a.load()}),n()()(),g(6,vi,2,1,"div",5)(7,Ci,2,0,"div",6)(8,Oi,20,3,"div",7)(9,Pi,18,4,"div",8),n()),r&2&&(l(5),se("ngModel",a.date),l(),s("ngIf",a.error),l(),s("ngIf",a.loading),l(),s("ngIf",!a.loading),l(),s("ngIf",a.selected))},dependencies:[P,I,j,F,w,$,be,_e,R,B],styles:[".table[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{margin-right:6px}.table[_ngcontent-%COMP%]   tr.active[_ngcontent-%COMP%]{background-color:var(--primary-100, #e0e7ff)}.badge--success[_ngcontent-%COMP%]{background-color:#10b981;color:#fff}.badge--warning[_ngcontent-%COMP%]{background-color:#f59e0b;color:#fff}.form-card[_ngcontent-%COMP%]{margin-top:20px;padding:16px;background:var(--surface, #f9fafb);border-radius:8px}.form-grid-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}"]})}}return t})();var ki=()=>({exact:!0}),Ft=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=C({type:t,selectors:[["app-hd"]],standalone:!0,features:[Je],decls:31,vars:2,consts:[["role","navigation","aria-label","Helpdesk navigation",1,"navbar--glass"],[1,"nav-left"],[1,"logo"],["routerLink","/hd","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/hd/fiche-jour","routerLinkActive","active"],["routerLink","/hd/recap-semaine","routerLinkActive","active"],[1,"nav-right"],[1,"hd-wrap"],[1,"hd-title"],[1,"hd-cards"],["routerLink","/hd/fiche-jour",1,"hd-card"],[1,"hd-card-icon"],[1,"hd-card-title"],[1,"hd-card-text"],["routerLink","/hd/recap-semaine",1,"hd-card"]],template:function(r,a){r&1&&(i(0,"nav",0)(1,"div",1)(2,"span",2),o(3,"Helpdesk CCE"),n(),i(4,"a",3),o(5,"HD"),n(),i(6,"a",4),o(7,"Prestation journali\xE8re"),n(),i(8,"a",5),o(9,"Semaine"),n()(),i(10,"div",6)(11,"span"),o(12,"Bienvenue"),n()()(),i(13,"section",7)(14,"h2",8),o(15,"Helpdesk "),n(),i(16,"div",9)(17,"a",10)(18,"div",11),o(19,"\u{1F4DD}"),n(),i(20,"div",12),o(21,"Fiche du jour"),n(),i(22,"div",13),o(23,"Encoder les tickets et autres t\xE2ches du jour."),n()(),i(24,"a",14)(25,"div",11),o(26,"\u{1F4E6}"),n(),i(27,"div",12),o(28,"R\xE9cap semaine"),n(),i(29,"div",13),o(30,"Consulter et exporter la semaine en Word."),n()()()()),r&2&&(l(4),s("routerLinkActiveOptions",Qe(1,ki)))},dependencies:[tt,me,he,xe],styles:[".hd-wrap[_ngcontent-%COMP%]{background:#fff;border-radius:14px;padding:22px;box-shadow:0 8px 24px #0000000f}.hd-title[_ngcontent-%COMP%]{margin:0 0 10px;font-size:22px}.hd-about[_ngcontent-%COMP%]{margin:8px 0 20px;line-height:1.5;color:#374151}.hd-about[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:#f3f4f6;padding:2px 6px;border-radius:6px}.hd-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:14px}.hd-card[_ngcontent-%COMP%]{display:block;text-decoration:none;color:inherit;border:1px solid #e5e7eb;border-radius:12px;padding:16px;transition:transform .12s ease,box-shadow .12s ease,border-color .12s ease;background:#f9fafb}.hd-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #00000014;border-color:#c7d2fe;background:#fff}.hd-card-icon[_ngcontent-%COMP%]{font-size:28px;margin-bottom:8px}.hd-card-title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:4px}.hd-card-text[_ngcontent-%COMP%]{color:#6b7280;font-size:14px}.navbar--glass[_ngcontent-%COMP%]{background:linear-gradient(270deg,#1e3a8a,#2563eb,#1d4ed8,#1e3a8a);background-size:600% 600%;animation:_ngcontent-%COMP%_gradientShift 12s ease infinite;margin:30px;width:calc(100% - 60px);padding:14px 22px;border-radius:16px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 6px 20px #0000004d;color:#fff;transition:all .3s ease}.navbar--glass[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:28px;font-weight:400;letter-spacing:.3px;margin-right:18px;line-height:1;display:inline-flex;align-items:center;gap:8px;text-shadow:0 1px 2px rgba(0,0,0,.35);white-space:nowrap}.navbar--glass[_ngcontent-%COMP%]   .nav-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.navbar--glass[_ngcontent-%COMP%]   .nav-left[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-weight:500;padding:6px 12px;border-radius:10px;opacity:.95;transition:background .2s ease,opacity .15s ease,transform .08s ease}.navbar--glass[_ngcontent-%COMP%]   .nav-left[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:1;background:#ffffff1f}.navbar--glass[_ngcontent-%COMP%]   .nav-left[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:#fff3;box-shadow:inset 0 0 0 1px #ffffff40}.navbar--glass[_ngcontent-%COMP%]   .nav-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;opacity:.95}@media (max-width: 420px){.navbar--glass[_ngcontent-%COMP%]{margin:12px;width:calc(100% - 24px);padding:8px 12px}.navbar--glass[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:22px;margin-right:8px}.navbar--glass[_ngcontent-%COMP%]   .nav-left[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:6px 10px}}@keyframes _ngcontent-%COMP%_gradientShift{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}"]})}}return t})();var wi=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:gt},{path:"calendar",component:mt},{path:"interpretes",component:ht},{path:"interpretes/:tolkcode/detail",component:vt},{path:"interpretes/:tolkcode/audiences",component:kt},{path:"interpretes/:tolkcode/adresses",component:Et},{path:"interpretes/:tolkcode/langues",component:yt},{path:"interpretes/:tolkcode/tva",component:Mt},{path:"interpretes/:tolkcode/indispo",component:Pt},{path:"presence-interpretes",component:Tt},{path:"prestations",component:Nt},{path:"hd",component:Ft},{path:"hd/fiche-jour",loadComponent:()=>import("./chunk-G7CTT5WT.js").then(t=>t.HDPrestationJourComponent)},{path:"hd/recap-semaine",loadComponent:()=>import("./chunk-24WMANUN.js").then(t=>t.HDRecapSemaineComponent)},{path:"**",redirectTo:"dashboard"}],Dt=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Ae({type:t})}static{this.\u0275inj=we({imports:[me.forRoot(wi,{scrollPositionRestoration:"enabled"}),me]})}}return t})();var Lt=(()=>{class t{constructor(e){this.authService=e,this.user="anonymous"}ngOnInit(){this.authService.getLogin().subscribe(e=>{this.user=e})}static{this.\u0275fac=function(r){return new(r||t)(f(De))}}static{this.\u0275cmp=C({type:t,selectors:[["app-navbar"]],decls:20,vars:1,consts:[[1,"navbar","navbar--glass"],[1,"nav-left"],[1,"logo"],["routerLink","/dashboard","routerLinkActive","active"],["routerLink","/calendar","routerLinkActive","active"],["routerLink","/interpretes","routerLinkActive","active"],["routerLink","/interpretes/1/detail","routerLinkActive","active"],["routerLink","/presence-interpretes","routerLinkActive","active"],["routerLink","/prestations","routerLinkActive","active"],[1,"nav-right"]],template:function(r,a){r&1&&(i(0,"nav",0)(1,"div",1)(2,"span",2),o(3,"Dragoman"),n(),i(4,"a",3),o(5,"Accueil"),n(),i(6,"a",4),o(7,"Audiences"),n(),i(8,"a",5),o(9,"Interpr\xE8tes"),n(),i(10,"a",6),o(11,"Interpr\xE8te test Jason"),n(),i(12,"a",7),o(13,"Feuille de pr\xE9sence"),n(),i(14,"a",8),o(15,"Prestations"),n()(),i(16,"div",9),o(17," Bienvenue, "),i(18,"strong"),o(19),n()()()),r&2&&(l(19),p(a.user))},dependencies:[he,xe],styles:[".navbar--glass[_ngcontent-%COMP%]{background:linear-gradient(270deg,#1e3a8a,#2563eb,#1d4ed8,#1e3a8a);background-size:600% 600%;animation:gradientShift 12s ease infinite;margin:30px;width:calc(100% - 60px);padding:14px 22px;border-radius:16px;box-shadow:0 6px 20px #0000004d;display:flex;justify-content:space-between;align-items:center;color:#fff;transition:all .3s ease}.navbar--glass[_ngcontent-%COMP%]   .nav-left[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:6px 12px}@media (max-width: 420px){.navbar--glass[_ngcontent-%COMP%]{margin:12px;width:calc(100% - 24px);padding:8px 12px}}.navbar--glass[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:28px;font-weight:400;letter-spacing:.3px;margin-right:18px;line-height:1;display:inline-flex;align-items:center;gap:8px;text-shadow:0 1px 2px rgba(0,0,0,.35);white-space:nowrap}.navbar--glass[_ngcontent-%COMP%]   .nav-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}"]})}}return t})();function Ai(t,d){t&1&&u(0,"app-navbar")}var Vt=(()=>{class t{constructor(e,r){this.router=e,this.http=r,this.forecasts=[],this.title="dragoman.client"}ngOnInit(){this.getForecasts()}getForecasts(){this.http.get("/weatherforecast").subscribe({next:e=>this.forecasts=e,error:e=>console.error(e)})}static{this.\u0275fac=function(r){return new(r||t)(f(fe),f(M))}}static{this.\u0275cmp=C({type:t,selectors:[["app-root"]],decls:2,vars:1,consts:[[4,"ngIf"]],template:function(r,a){r&1&&(g(0,Ai,1,0,"app-navbar",0),u(1,"router-outlet")),r&2&&s("ngIf",!a.router.url.startsWith("/hd"))},dependencies:[I,ot,Lt]})}}return t})();var $t=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Ae({type:t,bootstrap:[Vt]})}static{this.\u0275inj=we({imports:[rt,me,Dt,st,dt,nt]})}}return t})();it().bootstrapModule($t).catch(t=>console.error(t));
