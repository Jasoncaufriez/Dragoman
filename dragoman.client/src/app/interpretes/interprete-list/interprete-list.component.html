<div class="interprete-container">
  <!-- RETIR√â: card--accent pour enlever le trait bleu -->
  <div class="card card--panel">
    <div class="toolbar">
      <h2 class="page-title">Recherche d‚Äôinterpr√®tes</h2>
    </div>

    <form [formGroup]="advForm" class="card card--surface search-card">
      <div class="advanced-grid">
        <label>
          Langue source
          <select formControlName="langSrc">
            <option [ngValue]="null">‚Äî</option>
            <option *ngFor="let l of langues" [ngValue]="l.id">{{ l.libelle }}</option>
          </select>
        </label>

        <label>
          Langue destination
          <select formControlName="langDst">
            <option [ngValue]="null">‚Äî</option>
            <option *ngFor="let l of langues" [ngValue]="l.id">{{ l.libelle }}</option>
          </select>
        </label>

        <label class="date-cell">
          Date
          <input type="date" formControlName="date" />
        </label>

        <div class="actions">
          <button type="button" class="btn btn--sm" (click)="resetAdvanced()">Effacer</button>
          <button type="button" class="btn btn--primary btn--sm" (click)="runAdvanced()">Rechercher</button>
        </div>
      </div>
    </form>

    <div *ngIf="error" class="alert alert--error">{{ error }}</div>
    <div *ngIf="loading" class="muted">Chargement‚Ä¶</div>

    <div class="table-wrap" *ngIf="!loading">
      <table class="table table--compact" *ngIf="rows.length; else empty">
        <thead>
          <tr class="thead-head">
            <th>Code</th>
            <th>Nom</th>
            <th>Pr√©nom</th>
            <th>T√©l√©phone</th>
            <th>Langues dest.</th>
            <th class="right">Distance</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let r of rows" (click)="openDetail(r.tolkcode)" class="clickable">
            <td class="center">{{ r.tolkcode }}</td>
            <td class="ellipsis">{{ r.nom || '‚Äî' }}</td>
            <td class="ellipsis">{{ r.prenom || '‚Äî' }}</td>
            <td>
              <ng-container *ngIf="(r.gsm || r.tel || r.telbis); else noTel">
                <div *ngIf="r.gsm">üì± {{ r.gsm }}</div>
                <div *ngIf="r.tel">‚òéÔ∏è {{ r.tel }}</div>
                <div *ngIf="r.telbis">‚òéÔ∏è {{ r.telbis }}</div>
              </ng-container>
              <ng-template #noTel>‚Äî</ng-template>
            </td>
            <td class="langs">
              <span class="badge" *ngFor="let l of r.languesDestination">{{ l }}</span>
            </td>
            <td class="right">
              <ng-container *ngIf="r.distanceKm != null; else na">
                {{ r.distanceKm | number:'1.0-1' }} km
              </ng-container>
              <ng-template #na>‚Äî</ng-template>
            </td>
          </tr>
        </tbody>
      </table>
      <ng-template #empty><p class="muted">Aucun r√©sultat.</p></ng-template>
    </div>
  </div>
</div>
