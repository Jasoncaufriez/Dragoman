<nav class="navbar--glass" role="navigation" aria-label="Helpdesk navigation">
  <div class="nav-left">
    <span class="logo">Helpdesk CCE</span>

    <a routerLink="/hd" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">HD</a>
    <a routerLink="/hd/fiche-jour" routerLinkActive="active">Prestation journaliÃ¨re</a>
    <a routerLink="/hd/recap-semaine" routerLinkActive="active">Semaine</a>
  </div>

  <div class="nav-right">
    <span>Bienvenue</span>
  </div>
</nav>

<div class="hd-carte" *ngIf="formulaire">
  <h2>Fiche Helpdesk â€” Jour</h2>

  <div class="hd-meta">
    Utilisateur: <b>{{ user }}</b>
  </div>

  <form [formGroup]="formulaire" class="form-grid">

    <!-- MINI-CARDS: Date / RÃ©gime / Garde -->
    <div class="mini-cards">
      <div class="mini-card">
        <div class="mini-label">Date</div>
        <input type="date" formControlName="hdDate" />
      </div>

      <div class="mini-card">
        <div class="mini-label">RÃ©gime de travail</div>
        <select formControlName="hdRegimeTravail">
          <option value="mi-temps">Mi-temps</option>
          <option value="temps plein">Temps plein</option>
          <option value="autre">Autre</option>
        </select>
      </div>

      <div class="mini-card mini-guard">
        <label class="inline">
          <input type="checkbox" formControlName="hdEnGarde" />
          Je suis de garde
        </label>
      </div>
    </div>

    <!-- TICKETS -->
    <h3>Tickets</h3>
    <table class="hd-table">
      <thead>
        <tr>
          <th>Heure</th>
          <th>NÂ°</th>
          <th>Description</th>
          <th>DurÃ©e (min)</th>
          <th></th>
        </tr>
      </thead>
      <tbody formArrayName="hdTickets">
        <tr *ngFor="let t of tickets.controls; let i = index" [formGroupName]="i">
          <td><input type="time" formControlName="heure" /></td>
          <td><input type="text" formControlName="numero" /></td>
          <td><input type="text" formControlName="type" /></td>
          <td><input type="number" min="0" formControlName="dureeMin" /></td>
          <td><button type="button" (click)="supprimerTicket(i)">ğŸ—‘ï¸</button></td>
        </tr>
      </tbody>
    </table>
    <button type="button" (click)="ajouterTicket()">â• Ajouter un ticket</button>

    <!-- AUTRES TÃ‚CHES -->
    <h3>Autres tÃ¢ches</h3>
    <table class="hd-table">
      <thead>
        <tr>
          <th>Description</th>
          <th>DurÃ©e (min)</th>
          <th></th>
        </tr>
      </thead>
      <tbody formArrayName="hdAutresTaches">
        <tr *ngFor="let a of autresTaches.controls; let i = index" [formGroupName]="i">
          <td><input type="text" formControlName="denomination" /></td>
          <td><input type="number" min="0" formControlName="dureeMin" /></td>
          <td><button type="button" (click)="supprimerAutreTache(i)">ğŸ—‘ï¸</button></td>
        </tr>
      </tbody>
    </table>
    <button type="button" (click)="ajouterAutreTache()">â• Ajouter une tÃ¢che</button>

    <!-- REMARQUES -->
    <div class="row">
      <label>Remarques</label>
      <textarea formControlName="hdRemarquesCollaborateur" rows="2"></textarea>
    </div>

    <!-- ACTIONS -->
    <div class="actions">
      <button type="button" [disabled]="enregistrementEnCours" (click)="enregistrerJour()">ğŸ’¾ Enregistrer</button>
      <span class="muted">{{ messageSauvegarde }}</span>

    </div>
  </form>
</div>
